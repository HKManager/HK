<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1;text/html; charset=utf-8;" />

		<script>
			var SBpath = "../../../js/";
		</script>
		
		<script src="../../../js/SBGrid/SBGrid_Lib.js" type="text/javascript"></script>
		<script src="../../../js/SBGrid/SBGrid_min.js" type="text/javascript"></script>
		<link href="../../../js/SBGrid/css/SBGrid.css" rel="stylesheet" type="text/css">
		<link href="../../../js/SBGrid/css/SBGrid_Default.css" rel="stylesheet" type="text/css">
		<link href="../../../css/basic.css" rel="stylesheet" type="text/css">
		<link href="../../../css/common.css" rel="stylesheet" type="text/css">
		<script src="../../../data/data.js" type="text/javascript"></script>
		<script src="../../../js/toggle/toggle_attr.js" type="text/javascript"></script>
		<script src="../../../js/common.js" type="text/javascript"></script>

		<title>validate</title>

		<script type="text/javascript">
			
			var datagrid;
			var SBGridProperties = {};
			
			function createGrid(){
				
				SBGridProperties.parentid = 'SBGridArea';
				SBGridProperties.id = 'datagrid';
				SBGridProperties.jsonref = 'ct_data.gridData';
				SBGridProperties.selectmode = 'free';
				SBGridProperties.columns = [
					{caption : ['기본정보','이름'],			ref : 'name',		width : '80px',	style : 'text-align:center',	type : 'output'},
					{caption : ['기본정보','나이'],		ref : 'age',		width : '200px',	style : 'text-align:center',	type : 'input' ,validate : 'fnValidate' },
					{caption : ['기본정보','결혼여부'],		ref : 'married',	width : '80px',		style : 'text-align:center',	type : 'checkbox',skipkeyfocus : true, 	typeinfo : {checkedvalue : 'T', uncheckedvalue : 'F'}},
					{caption : ['기본정보','팀장여부'],		ref : 'leader',		width : '80px',		style : 'text-align:center',	type : 'radio',skipkeyfocus : true},
					{caption : ['부수정보','주소'],			ref : 'addr',		width : '200px',	style : 'text-align:center',	type : 'textarea' , validate : fnValidate},
					{caption : ['부수정보','전화번호'],		ref : 'tel',		width : '200px',	style : 'text-align:center', 	type : 'inputbutton',
						validate : function (objGrid, nRow, nCol, strValue){
							if(strValue.length > 13){
								alert('13자 이하로 입력해 주세요.');
								return objGrid.getCellData(nRow, nCol);
							}
							else{
								return strValue;
							}
						}
					},
					{caption : ['부수정보','이메일'],		ref : 'email',		width : '200px',	style : 'text-align:center',	type : 'outputbutton',skipkeyfocus : true}
				];
				datagrid = _SBGrid.create(SBGridProperties);
			};
			function fnValidate(objGrid, nRow, nCol, strValue){
				if(isNaN(Number(strValue))){
					alert('숫자만 입력하세요.');
					return objGrid.getCellData(nRow, nCol);
				}
				else{
					return Number(strValue);
				}				
			}
		</script>
	</head>

	<body>
		<div class="subTitle">
			<h2 class="title">validate</h2>
		</div>

		<p class="ctext4">Description</p>
		<ul class="descList">
			<li> ● 그리드 최초 생성시가 아닌 데이터 변경시 사용자 지정 function을 호출합니다.</li>
			<li> ● 해당 컬럼의 선택한 행에서만 function을 호출합니다.</li>
			<!-- <li style="color:red;font-weight: bold;"> ● 주의 사항 : setCellData 등 사용자가 직접 데이터를 변경하지 않을 때에는 function을 호출하지 않습니다.</li> -->			
		</ul>
		<p class="ctext4">Value</p>
		<div class="example_box" style="width:90%;">
			<pre>
			
	<span style="font-weight: bold;"> * 컬럼속성 : validate : value1</span>
	   - value1 <span style="font-weight: bold;">(필수)</span> : <span style="font-weight: bold;">[string | object]</span> function 지정 or function 호출
		  → param1 (선택)  : [object] 선택한 그리드 객체(id)
		  → param2 (선택)  : [number] 선택한 셀의 행 인덱스
		  → param3 (선택)  : [number] 선택한 셀의 열 인덱스
		  → param4 (선택)  : [string] 입력된 데이터
			</pre>
		</div>
			<div class="ctext4">Example
				<input type="button" id = "clickb" class="buttonStyle" name="bt" value="code View" onclick="codeView()" />
			</div>
			<div class="example_box_e" id="toggle">
			<pre>
			<span class="comment"></span>
	
	var datagrid;
	var SBGridProperties = {};
	
	function createGrid(){
		
		SBGridProperties.parentid = 'SBGridArea';
		SBGridProperties.id = 'datagrid';
		SBGridProperties.jsonref = 'ct_data.gridData';
		SBGridProperties.selectmode = 'free';
		SBGridProperties.columns = [
			{caption : ['기본정보','이름'],		ref : 'name',		width : '80px',	style : 'text-align:center',	type : 'output'},
			{caption : ['기본정보','나이'],		ref : 'age',		width : '200px',	style : 'text-align:center',	type : 'input' ,		<span class="highlight1">validate : 'fnValidate'</span> },
			{caption : ['기본정보','결혼여부'],	ref : 'married',	width : '80px',	style : 'text-align:center',	type : 'checkbox',	skipkeyfocus : true, 	typeinfo : {checkedvalue : 'T', uncheckedvalue : 'F'}},
			{caption : ['기본정보','팀장여부'],	ref : 'leader',		width : '80px',	style : 'text-align:center',	type : 'radio',		skipkeyfocus : true},
			{caption : ['부수정보','주소'],		ref : 'addr',		width : '200px',	style : 'text-align:center',	type : 'textarea',	<span class="highlight1">validate : fnValidate</span>},
			{caption : ['부수정보','전화번호'],	ref : 'tel',			width : '200px',	style : 'text-align:center', 	type : 'inputbutton',
				<span class="highlight1">validate : function (objGrid, nRow, nCol, strValue)</span> {
					if(strValue.length > 13){
						alert('13자 이하로 입력해 주세요.');
						return objGrid.getCellData(nRow, nCol);
					}
					else{
						return strValue;
					}
				}
			},
			{caption : ['부수정보','이메일'],	ref : 'email',		width : '200px',	style : 'text-align:center',	type : 'outputbutton',skipkeyfocus : true}
		];
		datagrid = _SBGrid.create(SBGridProperties);		
	};
	
	function <span class="highlight1">fnValidate(objGrid, nRow, nCol, strValue)</span> {
		if(isNaN(Number(strValue))){
			alert('숫자만 입력하세요.');
			return objGrid.getCellData(nRow, nCol);
		}
		else{
			return Number(strValue);
		}
	};
			</pre>
		</div>
		<p class="ctext4">Sample</p>
		<div class="gridDiv">
			<!-- 나이 컬럼에 숫자를 입력해 +1되는 동작을 확인해보세요. -->
			나이 컬럼에 문자입력 또는 전화번호 컬럼에 13자리 이상 문자를 입력해 보세요.
			<div id="SBGridArea" class="gridStyle"></div>
		</div>
	</body>
</html>
