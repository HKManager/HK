<canvas id="a" width="999" height="999"><canvas id="b" width="999" height="999"><title>A DAY IN THE LIFE</title><body><script>function c(){z=b,A=z.getContext("2d"),document.body.appendChild(z)}function d(a,b,c,d){if(!d)var d=!1;var b=b,e=A,f=5*b,g=c.x,h=c.y,i=[];if(a){a=a.toUpperCase();for(var j=0;a.length>j;j++){var k=B[a.charAt(j)];k&&i.push(k)}if(0==d){var l=0;for(j=0;i.length>j;j++){k=i[j];for(var m=0,n=0,o=0;k.length>o;o++){for(var p=k[o],q=0;p.length>q;q++)p[q]&&e.fillRect(l+q*f+g,m+h,f,f);n=Math.max(n,p.length*f),m+=f}l+=f+n}}else{var l=0;for(j=0;i.length>j;j++){k=i[i.length-j-1];for(var m=0,n=0,o=0;k.length>o;o++){for(var p=k[o],q=0;p.length>q;q++)p[q]&&e.fillRect(l+q*f+g,m+h,f,f);n=Math.max(n,p.length*f),m+=f}l-=f+n}}}}function e(){for(var a=0;20>=a;a++){var b=getFromPool();b.create(player.x,player.y,"","pixel"),b.xSpeed=Math.floor(20*Math.random())-10,b.ySpeed=Math.floor(20*Math.random())-10,b.size=tlSz/(Math.floor(8*Math.random())+2);var c=[c1,c2,c3,c4];m(c),b.color=c[0],b.life=50,pixels.push(b)}}function f(){for(var a=0;20>=a;a++){var b=getFromPool();b.create(player.x,player.y,"","pixel"),b.xSpeed=Math.floor(20*Math.random())-10,b.ySpeed=Math.floor(20*Math.random())-10,b.size=tlSz/(Math.floor(6*Math.random())+8),b.color=A.fillStyle=c3,b.life=30,pixels.push(b)}}function g(){for(var a=0;50>=a;a++){var b=getFromPool(),c=Math.floor(Math.random()*tlSz*8);1!=gamePhase&&2!=gamePhase&&3!=gamePhase||(c=Math.floor(Math.random()*tlSz*7)+1*tlSz),b.create(11*tlSz+tlSz*Math.floor(12*Math.random()),c,"","pixel_bg"),b.xSpeed=Math.floor(3*Math.random())+(-1==gamePhase?1:0),b.ySpeed=0,b.size=tlSz/(Math.floor(8*Math.random())+2),b.alpha=(Math.floor(3*Math.random())+1)/40;var d=[c1,c2,c3,c4];m(d),b.color=d[0],bgPixels.push(b)}}function h(){for(var a=0;5>=a;a++){var b=getFromPool();b.create(player.x,player.y,"","pixel"),b.xSpeed=Math.floor(20*Math.random())-10,b.ySpeed=Math.floor(20*Math.random())-10,b.size=tlSz/(Math.floor(8*Math.random())+10),b.color=c2,b.life=10,pixels.push(b)}}function i(){for(var a=0;20>=a;a++){var b=getFromPool();b.create(player.x,player.y,"","pixel"),b.xSpeed=Math.floor(20*Math.random())-10,b.ySpeed=Math.floor(20*Math.random())-10,b.size=tlSz/(Math.floor(8*Math.random())+10),b.color=c4,b.life=30,pixels.push(b)}}function j(){for(var a=0;5>=a;a++){var b=getFromPool();b.create(player.x,player.y,"","pixel"),b.xSpeed=5-Math.floor(5*Math.random()),b.ySpeed=-Math.floor(5*Math.random()),b.size=tlSz/(Math.floor(6*Math.random())+8),b.color=c4,b.life=20,pixels.push(b)}}function k(){for(var a=0;5>=a;a++){var b=getFromPool();b.create(player.x+tlSz+Math.floor(20*Math.random())-10,player.y+Math.floor(Math.random()*tlSz)-tlSz/2,"","pixel"),b.xSpeed=Math.floor(15*Math.random())+10,b.ySpeed=0,b.size=tlSz/(Math.floor(6*Math.random())+8),b.color=c2,b.life=30,pixels.push(b)}}function l(){var a=getFromPool();a.create(player.x+tlSz/3+Math.floor(10*Math.random())-5,player.y+Math.floor(Math.random()*(tlSz/3)*2)-tlSz/3,"","pixel"),a.xSpeed=Math.floor(15*Math.random())+10,a.ySpeed=0,a.size=tlSz/(Math.floor(6*Math.random())+8),a.color=c4,a.life=10,pixels.push(a)}function m(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}function n(){if(-1!=sst){var a=Date.now()-sst;if(a>sdu)return void(sst=-1);var b=a/sdu,c=Math.pow(b-1,3)+1;ctx.save();var d=c*(Math.cos(.1*a)+Math.cos(.3115*a))*5,e=c*(Math.sin(.05*a)+Math.sin(.057113*a))*5;ctx.translate(d,e)}}function o(){-1!=sst&&ctx.restore()}function p(){sst=Date.now()}function q(){requestAnimationFrame(q),ctx.clearRect(0,0,cv.width,cv.height),n(),setTimeout(function(){ctx.restore()},sdu,this)}function r(){F.play(C.currentTime)}function s(){G.play(C.currentTime)}function t(){H.play(C.currentTime)}function u(){I.play(C.currentTime)}function v(){J.play(C.currentTime)}function w(a){D.stop(),E.stop(),D.tempo=a,E.tempo=a,D.play(C.currentTime),E.play(C.currentTime)}function y(){1==isMuted?(D.gain.gain.value=.1,E.gain.gain.value=.05,F.gain.gain.value=.1,G.gain.gain.value=.2,H.gain.gain.value=.1,I.gain.gain.value=.1,J.gain.gain.value=.1,isMuted=!1):(D.gain.gain.value=0,E.gain.gain.value=0,F.gain.gain.value=0,G.gain.gain.value=0,H.gain.gain.value=0,I.gain.gain.value=0,J.gain.gain.value=0,isMuted=!0)}this.kontra={init:function(a){var b=this.canvas=document.getElementById(a)||a||document.querySelector("canvas");if(!this._isCanvas(b))throw Error("You must provide a canvas element for the game");this.context=b.getContext("2d")},_noop:function(){},_isString:function(a){return""+a===a},_isNumber:function(a){return+a===a},_isFunc:function(a){return"function"==typeof a},_isImage:function(a){return!!a&&"IMG"===a.nodeName||this._isCanvas(a)},_isCanvas:function(a){return!!a&&"CANVAS"===a.nodeName}},function(a,b,c){a.gameLoop=function(d){function e(){if(g=b(e),h=c.now(),i=h-f,f=h,1e3>=i){for(k+=i;k>=l;)o.update(m),k-=l;n(),o.render()}}if(d=d||{},!a._isFunc(d.update)||!a._isFunc(d.render))throw Error("You must provide update() and render() functions");var f,g,h,i,j=d.fps||60,k=0,l=1e3/j,m=1/j,n=!1===d.clearCanvas?a._noop:function(){a.context.clearRect(0,0,a.canvas.width,a.canvas.height)},o={update:d.update,render:d.render,isStopped:!0,start:function(){f=c.now(),this.isStopped=!1,b(e)},stop:function(){this.isStopped=!0,cancelAnimationFrame(g)},_frame:e,set _last(a){f=a}};return o}}(kontra,requestAnimationFrame,performance),function(a){function b(){for(var a=[],b=0;arguments.length>b;b++)arguments[b]&&a.push(arguments[b].trim().replace(RegExp("(^[/]{"+(a[0]?1:2)+",}|[/]*$)","g"),""));return a.join("/")}function c(a){return a.split(".").pop()}function d(a){var b=a.replace("."+c(a),"");return 0==b.indexOf("/")&&0==b.lastIndexOf("/")?b.substr(1):b}function e(c){var e=d(c),f=new Image,g=kontra.assets,h=g.images;return c=b(g.imagePath,c),new a(function(a,b){f.onload=function(){h[e]=h[c]=this,a(this)},f.onerror=function(){b("Unable to load image "+c)},f.src=c})}function f(e){var f,g,h,i,j,k=kontra.assets,m=k.audio,n=k.audioPath;return Array.isArray(e)||(e=[e]),new a(function(a,k){for(j=0;f=e[j];j++)if(l[c(f)]){h=f;break}h?(g=d(h),i=new Audio,f=b(n,h),i.addEventListener("canplay",function(){m[g]=m[f]=this,a(this)}),i.onerror=function(){k("Unable to load audio "+f)},i.src=f,i.load()):k("cannot play any of the audio formats provided")})}function g(c){var e=d(c),f=new XMLHttpRequest,g=kontra.assets,h=g.data;return c=b(g.dataPath,c),new a(function(a,b){f.addEventListener("load",function(){var d=f.responseText;if(200!==f.status)return b(d);try{d=JSON.parse(d)}catch(a){}h[e]=h[c]=d,a(d)}),f.open("GET",c,!0),f.send()})}var h=/(jpeg|jpg|gif|png)$/,i=/(wav|mp3|ogg|aac)$/,j=/^no$/,k=new Audio,l={wav:"",mp3:k.canPlayType("audio/mpeg;").replace(j,""),ogg:k.canPlayType('audio/ogg; codecs="vorbis"').replace(j,""),aac:k.canPlayType("audio/aac;").replace(j,"")};kontra.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load:function(){var b,d,j,k,l,m=[];for(k=0;j=arguments[k];k++)b=Array.isArray(j)?j[0]:j,d=c(b),l=d.match(h)?e(j):d.match(i)?f(j):g(j),m.push(l);return a.all(m)},_canUse:l}}(Promise),function(a,b){"function"==typeof define&&define.amd?define(["exports"],b):b("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:a.TinyMusic={})}(this,function(a){function b(a){var c=a.split(f);this.frequency=b.getFrequency(c[0])||0,this.duration=b.getDuration(c[1])||0}function c(a,b,c){this.ac=a||new AudioContext,this.createFxNodes(),this.tempo=b||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,c||[])}var d=440*Math.pow(Math.pow(2,1/12),-9),e=/^[0-9.]+$/,f=/\s+/,g=/(\d+)/,h={};"B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb".split("|").forEach(function(a,b){a.split("-").forEach(function(a){h[a]=b})}),b.getFrequency=function(a){var b=a.split(g),c=h[b[0]],e=(b[1]||4)-4;return d*Math.pow(Math.pow(2,1/12),c)*Math.pow(2,e)},b.getDuration=function(a){return e.test(a)?parseFloat(a):a.toLowerCase().split("").reduce(function(a,b){return a+("w"===b?4:"h"===b?2:"q"===b?1:"e"===b?.5:"s"===b?.25:0)},0)},c.prototype.createFxNodes=function(){var a=[["bass",100],["mid",1e3],["treble",2500]],b=this.gain=this.ac.createGain();return a.forEach(function(a,c){c=this[a[0]]=this.ac.createBiquadFilter(),c.type="peaking",c.frequency.value=a[1],b.connect(b=c)}.bind(this)),b.connect(this.ac.destination),this},c.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(a){this.notes.push(a instanceof b?a:new b(a))}.bind(this)),this},c.prototype.createCustomWave=function(a,b){b||(b=a),this.waveType="custom",this.customWave=[new Float32Array(a),new Float32Array(b)]},c.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},c.prototype.scheduleNote=function(a,b){var c=60/this.tempo*this.notes[a].duration,d=c*(1-(this.staccato||0));return this.setFrequency(this.notes[a].frequency,b),this.smoothing&&this.notes[a].frequency&&this.slide(a,b,d),this.setFrequency(0,b+d),b+c},c.prototype.getNextNote=function(a){return this.notes[this.notes.length-1>a?a+1:0]},c.prototype.getSlideStartDelay=function(a){return a-Math.min(a,60/this.tempo*this.smoothing)},c.prototype.slide=function(a,b,c){var d=this.getNextNote(a);return this.setFrequency(this.notes[a].frequency,b+this.getSlideStartDelay(c)),this.rampFrequency(d.frequency,b+c),this},c.prototype.setFrequency=function(a,b){return this.osc.frequency.setValueAtTime(a,b),this},c.prototype.rampFrequency=function(a,b){return this.osc.frequency.linearRampToValueAtTime(a,b),this},c.prototype.play=function(a){return a="number"==typeof a?a:this.ac.currentTime,this.createOscillator(),this.osc.start(a),this.notes.forEach(function(b,c){a=this.scheduleNote(c,a)}.bind(this)),this.osc.stop(a),this.osc.onended=this.loop?this.play.bind(this,a):null,this},c.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this},a.Note=b,a.Sequence=c});var z,A,B={A:[[,1],[1,,1],[1,,1],[1,1,1],[1,,1]],B:[[1,1],[1,,1],[1,1,1],[1,,1],[1,1]],C:[[1,1,1],[1],[1],[1],[1,1,1]],D:[[1,1],[1,,1],[1,,1],[1,,1],[1,1]],E:[[1,1,1],[1],[1,1,1],[1],[1,1,1]],F:[[1,1,1],[1],[1,1],[1],[1]],G:[[,1,1],[1],[1,,1,1],[1,,,1],[,1,1]],H:[[1,,1],[1,,1],[1,1,1],[1,,1],[1,,1]],I:[[1,1,1],[,1],[,1],[,1],[1,1,1]],J:[[1,1,1],[,,1],[,,1],[1,,1],[1,1,1]],K:[[1,,,1],[1,,1],[1,1],[1,,1],[1,,,1]],L:[[1],[1],[1],[1],[1,1,1]],M:[[1,1,1,1,1],[1,,1,,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,1],[1,1,,1],[1,,1,1],[1,,,1],[1,,,1]],O:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],P:[[1,1,1],[1,,1],[1,1,1],[1],[1]],Q:[[,1,1],[1,,,1],[1,,,1],[1,,1,1],[1,1,1,1]],R:[[1,1],[1,,1],[1,,1],[1,1],[1,,1]],S:[[1,1,1],[1],[1,1,1],[,,1],[1,1,1]],T:[[1,1,1],[,1],[,1],[,1],[,1]],U:[[1,,1],[1,,1],[1,,1],[1,,1],[1,1,1]],V:[[1,,,,1],[1,,,,1],[,1,,1],[,1,,1],[,,1]],W:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,1,1,1]],X:[[1,,,,1],[,1,,1],[,,1],[,1,,1],[1,,,,1]],Y:[[1,,1],[1,,1],[,1],[,1],[,1]],Z:[[1,1,1,1,1],[,,,1],[,,1],[,1],[1,1,1,1,1]],":":[[,,],[1,,],[,,,],[1,,],[,,]],0:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],1:[[,1],[,1],[,1],[,1],[,1]],2:[[1,1,1],[,,1],[1,1,1],[1,,],[1,1,1]],3:[[1,1,1],[,,1],[1,1,1],[,,1],[1,1,1]],4:[[1,,1],[1,,1],[1,1,1],[,,1],[,,1]],5:[[1,1,1],[1,,],[1,1,1],[,,1],[1,1,1]],6:[[1,1,1],[1,,],[1,1,1],[1,,1],[1,1,1]],7:[[1,1,1],[,,1],[,,1],[,,1],[,,1]],8:[[1,1,1],[1,,1],[1,1,1],[1,,1],[1,1,1]],9:[[1,1,1],[1,,1],[1,1,1],[,,1],[1,1,1]]," ":[[,,],[,,],[,,],[,,],[,,]],"-":[[,,],[,,],[1,1,1],[,,],[,,]],"!":[[,1],[,1],[,1],[,,],[,1]],"?":[[,1,1,1],[,,,1],[,,1],[,,],[,,1]]};kontra.init(),blurred=!1,window.onblur=function(){D.gain.gain.value=0,E.gain.gain.value=0,blurred=!0},x=kontra.canvas.getContext("2d"),x.imageSmoothingEnabled=!1,x.webkitImageSmoothingEnabled=!1,x.mozImageSmoothingEnabled=!1,x.msImageSmoothingEnabled=!1,x.oImageSmoothingEnabled=!1,imgPath="img/",OBU=imgPath+"obstacle.png",namesList=[],namesList.p_djump="DOUBLE JUMP",namesList.p_dash="DASH",namesList.p_glide="FLY",namesList.p_focus="FOCUS",namesList.p_coins="ATTRACT",spacingList=[],spacingList.p_djump=-300,spacingList.p_dash=-200,spacingList.p_glide=-150,spacingList.p_focus=-250,spacingList.p_coins=-400,clTimeout=null,c1="#70c1b3",c2="#ffe066",c3="#f25f5c",c4="#247ba0",c5="#50514f",kontra.assets.load(imgPath+"pcoin.png",imgPath+"focus.png",imgPath+"glide.png",imgPath+"dash.png",imgPath+"djum.png",imgPath+"jump.png",imgPath+"test.png",imgPath+"test2.png",imgPath+"test3.png",OBU,imgPath+"coin.png",imgPath+"shield.png",imgPath+"house.png",imgPath+"moon.png").then(function(){startLoop(),window.localStorage&&(personalBest=parseInt(localStorage.getItem("RECORD"))||0),pixels=[],bgPixels=[],create_pool(),initVar(),initializeGame(),g()}).catch(function(a){}),create_pool=function(){POOL=[];for(var a=0;300>=a;a++){var b=new obj;b.isActive=!1,b.flaggedRemove=!0,POOL.push(b)}},getFromPool=function(){for(var a=0;a<=POOL.length-1;a++)if(0==POOL[a].isActive)return POOL[a].isActive=!0,POOL[a].flaggedRemove=!1,POOL[a]},obj=function(){this.create=function(a,b,c,d){""!=c&&(this.image=kontra.assets.images[c]),this.x=a,this.y=b,this.spr=c,this.type=d,this.angle=0,this.size=tlSz,this.groundType=0,this.cnt=0,this.xSpeed=0,this.ySpeed=0,"player"==d?(this.shieldImage=kontra.assets.images[imgPath+"shield.png"],this.jumpPower=0,this.djumpPower=0,this.canJump=!1,this.canDJump=!1,this.glide=!1,this.isGliding=!1,this.hasDashed=!1,this.isDashing=!1,this.animCount=0,this.isAnimated=!0,this.frame=0):"obstacle"==d||"obstacle_falling"==d||"obstacle_horizontal"==d?(this.interval=setInterval(function(a){a.angle=45==a.angle?0:45},1e3,this),"obstacle_horizontal"==d&&(this.horMov=0,this.horAdd=-2,this.interval2=setInterval(function(a){a.horAdd=-a.horAdd},1e3,this))):"coin"==d?this.size=tlSz/2:"house"==d&&(this.size=2*tlSz)},this.animate=function(){1==this.isAnimated&&(this.animCount+=1),this.animCount<slowScrollingSpeed/scrollingSpeed*10||1!=this.isAnimated||(0==this.frame?(this.image=kontra.assets.images[imgPath+"test2.png"],this.frame=1):(this.image=kontra.assets.images[imgPath+"test.png"],this.frame=0),this.animCount=0),this.y<groundY-tlSz?(this.isAnimated=!1,this.frame=0,this.image=this.jumpPower>0||this.djumpPower>0||1==this.glide||1==this.isDashing?kontra.assets.images[imgPath+"test3.png"]:kontra.assets.images[imgPath+"test.png"]):this.isAnimated=!0},this.update=function(){if(0==this.flaggedRemove&&1==this.isActive)if("ground"==this.type)(this.x-=scrollingSpeed)<-tlSz&&this.remove();else if("player"==this.type)this.y-=this.jumpPower,this.jumpPower>0&&(this.jumpPower-=2),0>this.jumpPower&&(this.jumpPower=0),this.y-=this.djumpPower,this.djumpPower>0&&(this.djumpPower-=2),0>this.djumpPower&&(this.djumpPower=0),1==this.glide&&2>this.jumpPower&&2>this.djumpPower&&(this.y-=gravity,this.angle=80,0==this.isDashing&&4==(this.cnt+=1)&&(l(),this.cnt=0)),this.y<tlSz&&(this.y=tlSz),this.y<groundY-tlSz?this.y+=gravity:(this.y=groundY-tlSz,1==p_jump&&(this.canJump=!0),1==p_djump&&(this.canDJump=!0),this.angle=0,this.hasDashed=!1);else if("obstacle"==this.type)this.x-=scrollingSpeed,this.x<-tlSz&&this.remove(),lineDistance({x:this.x,y:this.y},{x:player.x,y:player.y})<.8*tlSz&&(0==player.isDashing?death():(this.remove(),s(),f()));else if("ground2"==this.type)this.x-=scrollingSpeed,this.x<-tlSz&&this.remove(),lineDistance({x:this.x,y:this.y},{x:player.x,y:player.y})<1.2*tlSz&&(0==player.isDashing?death():(this.remove(),s(),f()));else if("obstacle_falling"==this.type)this.x-=scrollingSpeed,this.x<-tlSz&&this.remove(),lineDistance({x:this.x,y:this.y},{x:player.x,y:player.y})<.8*tlSz&&(0==player.isDashing?death():(this.remove(),s(),f())),this.x<7*tlSz&&this.y<groundY-tlSz&&(this.y+=10);else if("obstacle_horizontal"==this.type)this.x-=scrollingSpeed,this.x<-tlSz&&this.remove(),this.x+=this.horAdd,lineDistance({x:this.x,y:this.y},{x:player.x,y:player.y})<.8*tlSz&&(0==player.isDashing?death():(this.remove(),s(),f()));else if("coin"==this.type){if(this.x-=scrollingSpeed,this.x<-tlSz&&this.remove(),1==p_coins&&lineDistance({x:this.x,y:this.y},{x:player.x,y:player.y})<3*tlSz){this.y<player.y&&(this.y+=scrollingSpeed/8*3),this.y>player.y&&(this.y-=scrollingSpeed/8*3),this.x<player.x&&(this.x+=scrollingSpeed/8*3),this.x>player.x&&(this.x-=scrollingSpeed/8*3)}lineDistance({x:this.x,y:this.y},{x:player.x,y:player.y})<tlSz&&(coins+=1,h(),r(),A.clearRect(0,0,12*tlSz,tlSz/1.1),A.fillStyle=c1,d("x "+coins,1.5,{x:tlSz,y:tlSz/4}),this.remove())}else if("pixel"==this.type)A.fillStyle=this.color,this.x-=this.xSpeed,this.y-=this.ySpeed,(this.cnt+=1)==this.life&&this.remove();else if("moon"==this.type)this.angle+=.005,this.x=5*tlSz+600*Math.cos(this.angle),this.y=9*tlSz+600*Math.sin(this.angle);else if("pixel_bg"==this.type&&(A.fillStyle=this.color,this.x-=this.xSpeed+scrollingSpeed,this.y-=this.ySpeed,this.cnt+=1,this.x<=-tlSz)){var a=Math.floor(Math.random()*tlSz*8);1!=gamePhase&&2!=gamePhase&&3!=gamePhase||(a=Math.floor(Math.random()*tlSz*7)+1*tlSz),this.x=11*tlSz+tlSz*Math.floor(12*Math.random()),this.y=a,this.xSpeed=Math.floor(3*Math.random())+(-1==gamePhase?1:0),this.ySpeed=0,this.size=tlSz/(Math.floor(8*Math.random())+2),this.alpha=(Math.floor(3*Math.random())+1)/40;var b=[c1,c2,c3,c4];m(b),this.color=b[0]}},this.draw=function(){0==this.flaggedRemove&&1==this.isActive&&("ground"==this.type?(x.fillStyle=c1,0==this.groundType?(x.fillRect(this.x+tlSz/8*0,2+this.y+tlSz/8*-4,tlSz/8*2,tlSz/8*2),x.fillRect(this.x+tlSz/8*1,2+this.y+tlSz/8*-4,tlSz/8*1,tlSz/8*3),x.fillRect(this.x+tlSz/8*5,2+this.y+tlSz/8*-4,tlSz/8*1,tlSz/8*2),x.fillRect(this.x+tlSz/8*5,2+this.y+tlSz/8*1,tlSz/8,tlSz/8),x.fillRect(this.x+tlSz/8*3,2+this.y+tlSz/8*2,tlSz/8,tlSz/8)):1==this.groundType?(x.fillRect(this.x+tlSz/8*0,2+this.y+tlSz/8*-4,tlSz/8*2,tlSz/8*2),x.fillRect(this.x+tlSz/8*1,2+this.y+tlSz/8*-4,tlSz/8*1,tlSz/8*3),x.fillRect(this.x+tlSz/8*5,2+this.y+tlSz/8*-4,tlSz/8*1,tlSz/8*2),x.fillRect(this.x+tlSz/8*3,2+this.y+tlSz/8*-5,tlSz/8,tlSz/8)):2==this.groundType&&(x.fillRect(this.x+tlSz/8*0,2+this.y+tlSz/8*-4,tlSz/8*2,tlSz/8*2),x.fillRect(this.x+tlSz/8*0,2+this.y+tlSz/8*-4,tlSz/8*1,tlSz/8*3),x.fillRect(this.x+tlSz/8*5,2+this.y+tlSz/8*-4,tlSz/8*1,tlSz/8*2),x.fillRect(this.x+tlSz/8*5,2+this.y+tlSz/8*0,tlSz/8,tlSz/8),x.fillRect(this.x+tlSz/8*3,2+this.y+tlSz/8*0,tlSz/8,tlSz/8),x.fillRect(this.x+tlSz/8*3,2+this.y+tlSz/8*2,tlSz/8,tlSz/8))):"ground2"==this.type?(x.fillStyle=c3,x.fillRect(this.x+tlSz/8*-2,this.y+tlSz/8*-4,tlSz/8*6,tlSz/8),x.fillRect(this.x+tlSz/8*-1,this.y+tlSz/8*-4,tlSz/8*4,tlSz/8*2),x.fillRect(this.x+tlSz/8*-0,this.y+tlSz/8*-3,tlSz/8*2,tlSz/8*2),x.fillRect(this.x+tlSz/8*1,this.y+tlSz/8*0,tlSz/8,tlSz/8),x.fillRect(this.x+tlSz/8*1,this.y+tlSz/8*2,tlSz/8,tlSz/8)):"pixel"==this.type?(x.fillStyle=this.color,x.fillRect(this.x,this.y,this.size,this.size)):"pixel_bg"==this.type?(x.fillStyle=this.color,x.globalAlpha=this.alpha,x.fillRect(this.x,this.y,this.size,this.size),x.globalAlpha=1):rotateAndPaintImage(x,this.image,this.angle,this.x,this.y,this.size,this.size),1==this.isDashing&&x.drawImage(this.shieldImage,this.x-tlSz/2,this.y-tlSz/2-12,1.5*this.size,1.5*this.size))},this.remove=function(){this.flaggedRemove=!0,this.image=null,this.shieldImage=null,this.type="",this.interval&&(window.clearInterval(this.interval),this.interval=null),this.interval2&&(window.clearInterval(this.interval2),this.interval2=null)}},b.addEventListener("touchend",function(a){a.preventDefault(),unglide()},!1),b.addEventListener("mouseup",function(a){unglide()},!1),b.addEventListener("touchstart",function(a){a.preventDefault(),glide(),jump(),click_start()},!1),b.addEventListener("mousedown",function(a){glide(),jump(),click_start()},!1),initVar=function(b){b||(b=!1),lostList=["p_djump","p_dash","p_glide","p_focus","p_coins"],changeTimeout=null,tlSz=a.width/10,groundY=8.5*tlSz,objects=[],0==b&&(ground=[]),jumpForce=45,slowScrollingSpeed=8,fastScrollingSpeed=16,dashSpeed=30,dashDuration=200,shieldDuration=400,gravity=15,groundDistance=tlSz,currentGDistance=0,obj_distance=500,coinDistance=100,coinPause=!0,coins=0,flash=!1,powerCounter=0,newPowerIn=800,currentScrolling=slowScrollingSpeed,scrollingSpeed=0,currentDistance=0,currentCoinDistance=0,coinPause=!0,coins=0,gamePhase=-1,p_jump=!0,p_djump=!0,p_dash=!0,p_glide=!0,p_focus=!0,p_coins=!0,p_multipleDash=!0,isToChangePower=!1},change=function(){1==gamePhase&&(changeTimeout=setTimeout(function(){1==gamePhase&&(isToChangePower=!0,changeTimeout=setTimeout(function(){1==gamePhase&&(changePower(),v(),isToChangePower=!1,changeTimeout=setTimeout(function(){1==gamePhase&&change()},3e3,this))},3e3,this))},newPowerIn,this))},changePower=function(){if(lostList.length>0){powerCounter=0,m(lostList),this[lostList[0]]=!1,player.jumpPower=0,player.djumpPower=0,player.glide=!1,0==p_focus&&(currentScrolling=fastScrollingSpeed,scrollingSpeed=currentScrolling),"p_focus"==lostList[0]&&w(200);for(var b=0;b<=objects.length-1;b++)objects[b].remove();objects.length=0,objects=[],flash=!0,A.fillStyle=c5,d("LOST",6,{x:a.width/2-2*tlSz,y:a.height/2-2*tlSz}),A.fillStyle=c3;var c=6;"p_djump"==lostList[0]&&(c=3),d(namesList[lostList[0]],c,{x:a.width/2+spacingList[lostList[0]],y:a.height/2}),setTimeout(function(){1==gamePhase&&A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz)},5e3,this),setTimeout(function(){flash=!1,powerCounter=0,currentDistance=0,currentGDistance=0,currentCoinDistance=0,A.clearRect(0,a.height/2-2*tlSz,12*tlSz,5*tlSz),A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz),A.fillStyle=c1,d("YOU LOST THE POWER TO ",1,{x:tlSz/3,y:a.height-.7*tlSz}),A.fillStyle=c3,d(namesList[lostList[0]],1.5,{x:5*tlSz,y:a.height-.8*tlSz}),A.fillStyle=c1,removeFromArray(lostList,lostList[0])},500,this)}else gamePhase=4,house.x=25*tlSz,flash=!0,p_jump=!1,A.fillStyle=c5,d("LOST",6,{x:a.width/2-2*tlSz,y:a.height/2-2*tlSz}),A.fillStyle=c3,d("JUMP",6,{x:a.width/2-250,y:a.height/2}),clTimeout=setTimeout(function(){A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz)},5e3,this),setTimeout(function(){flash=!1,powerCounter=0,currentDistance=0,currentGDistance=0,currentCoinDistance=0,A.clearRect(0,a.height/2-2*tlSz,12*tlSz,5*tlSz),A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz),A.fillStyle=c1,d("YOU LOST THE POWER TO ",1,{x:tlSz/3,y:a.height-.7*tlSz}),A.fillStyle=c3,d("JUMP",1.5,{x:5*tlSz,y:a.height-.8*tlSz}),A.fillStyle=c1,removeFromArray(lostList,lostList[0]),this.player.y=groundY-tlSz,this.player.angle=0},500,this)},initializeGame=function(b){if(b||(b=!1),w(150),gamePhase=-1,c(),A.fillStyle=c1,d("CLICK TO START",2,{x:2.2*tlSz,y:a.height-.8*tlSz}),A.fillStyle=c2,d("A Day in the Life",2,{x:1.8*tlSz,y:tlSz}),0!=personalBest&&(A.fillStyle=c2,d("Personal Best: "+personalBest,1,{x:5.5*tlSz,y:6*tlSz})),A.fillStyle=c1,d("CLICK to JUMP",1.5,{x:2.9*tlSz,y:3*tlSz*.9}),d("CLICK to DOUBLE JUMP",1.5,{x:2*tlSz,y:3.5*tlSz*.9}),d("CLICK to DASH",1.5,{x:3*tlSz,y:4*tlSz*.9}),d("HOLD CLICK to FLY",1.5,{x:2.4*tlSz,y:4.5*tlSz*.9}),A.fillStyle=c4,d("press M to mute",.5,{x:4.1*tlSz,y:5*tlSz*.9}),A.fillStyle=c4,d("a game by Mattia Fortunati - js13kgames 2017",.5,{x:.1*tlSz,y:.1*tlSz*.9}),0==b)for(var e=0;12>=e;e++){var f=getFromPool();f.create(e*tlSz,groundY,"","ground"),ground.push(f),f.groundType=Math.floor(3*Math.random())}player=getFromPool(),player.create(7*tlSz,groundY-tlSz,imgPath+"test.png","player"),house=getFromPool(),house.create(2*tlSz,groundY-2*tlSz,imgPath+"house.png","house"),moon=getFromPool(),moon.create(2*tlSz,groundY-2*tlSz,imgPath+"moon.png","moon"),moon.angle=1.5},startGame=function(){gamePhase=1,scrollingSpeed=currentScrolling,coinPause=!1,coinInterval=setInterval(function(){1==coinPause?coinPause=!1:coinPause=!0},1500,this)},death=function(){window.clearInterval(changeTimeout),changeTimeout=null,null!=clTimeout&&(window.clearInterval(clTimeout),clTimeout=null),s(),p(),q(),i(),scrollingSpeed=0,gamePhase=2,A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz),A.fillStyle=c1,d("GAME OVER",2,{x:3*tlSz,y:a.height-.8*tlSz}),coinInterval&&(window.clearInterval(coinInterval),coinInterval=null),window.localStorage&&coins>personalBest&&(personalBest=coins,localStorage.setItem("RECORD",coins)),setTimeout(function(){e(),s(),player.y=1e4},800,this),setTimeout(function(){gamePhase=3,A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz),A.fillStyle=c1,d("CLICK TO RETRY",2,{x:2.2*tlSz,y:a.height-.8*tlSz}),A.fillStyle=c1,A.fillRect(2*tlSz,3*tlSz,6*tlSz,3*tlSz),A.fillStyle=c2,d("COINS",2.5,{x:3.7*tlSz,y:3.5*tlSz});var b=""+coins,c=b.length*tlSz/3;d(b,3,{x:5.2*tlSz-c,y:4.7*tlSz}),personalBest==coins&&(A.fillStyle=c3,d("NEW PERSONAL BEST!",1,{x:3.3*tlSz,y:5.7*tlSz}))},1500,this)},jump=function(){1==gamePhase&&(1==player.canJump?(j(),t(),player.jumpPower=jumpForce,player.canJump=!1,player.angle=30):1==player.canDJump&&1==p_djump&&(t(),j(),player.djumpPower=jumpForce,player.jumpPower=0,player.canDJump=!1))},glide=function(){1==gamePhase&&(1==p_glide&&(player.glide=!0),(1==p_djump&&0==player.canDJump||0==p_djump&&0==player.canJump)&&0==player.hasDashed&&1==this.p_dash&&0==player.isDashing&&(u(),k(),setTimeout(function(){k()},50,this),setTimeout(function(){k()},100,this),setTimeout(function(){k()},150,this),setTimeout(function(){k()},200,this),scrollingSpeed=dashSpeed,player.angle=80,0==p_multipleDash&&(player.hasDashed=!0),player.isDashing=!0,setTimeout(function(){scrollingSpeed=currentScrolling},dashDuration*(currentScrolling==slowScrollingSpeed?1:2),this),setTimeout(function(){player.isDashing=!1},shieldDuration*(currentScrolling==slowScrollingSpeed?1:2),this)))},unglide=function(){1==player.glide&&1==gamePhase&&(player.glide=!1,player.angle=30)},click_start=function(){-1==gamePhase?(gamePhase=0,scrollingSpeed=currentScrolling,A.clearRect(0,0,a.width,a.height),A.fillStyle=c1,A.fillRect(0,tlSz/1.1,12*tlSz,tlSz/8),d("x "+coins,1.5,{x:tlSz,y:tlSz/4})):3!=gamePhase&&7!=gamePhase||restart()},clearObjects=function(a){null==a&&(a=!1);for(var b=0;b<=objects.length-1;b++)objects[b].isActive=!1,objects[b].remove();if(objects.length=0,objects=[],0==a){for(var b=0;b<=ground.length-1;b++)ground[b].isActive=!1,ground[b].remove();ground.length=0,ground=[]}player.remove(),player.isActive=!1,player=null,house.remove(),house.isActive=!1,house=null,moon.remove(),moon.isActive=!1,moon=null},restart=function(){x.clearRect(-100,0,a.width+200,a.height),A.clearRect(-100,0,a.width+200,a.height),clearObjects();for(var b=0;b<=lostList.length-1;b++)lostList[b]=null;initVar(),initializeGame()},createGround=function(){var a=getFromPool();a.create(11*tlSz,groundY,"","ground"),a.isActive=!0,a.flaggedRemove=!1,ground.push(a),a.groundType=Math.floor(3*Math.random())},createObstacle=function(){var a=Math.floor(8*Math.random());if(0==a){var b=getFromPool();if(b.create(12*tlSz,groundY-tlSz,OBU,"obstacle"),objects.push(b),currentScrolling==fastScrollingSpeed){var b=getFromPool();b.create(13*tlSz,groundY-tlSz,OBU,"obstacle"),objects.push(b)}}else if(1==a){var c=getFromPool();c.create(12*tlSz,groundY-2*tlSz,OBU,"obstacle"),objects.push(c);var d=getFromPool();d.create(12*tlSz,groundY-3*tlSz,OBU,"obstacle"),objects.push(d);var e=getFromPool();e.create(12*tlSz,groundY-7*tlSz,OBU,"obstacle"),objects.push(e)}else if(2==a){var f=getFromPool();f.create(12*tlSz,groundY-7*tlSz,OBU,"obstacle_falling"),objects.push(f)}else if(3==a){var g=getFromPool();g.create(12*tlSz,groundY,"","ground2"),objects.push(g);var h=getFromPool();h.create(12*tlSz,groundY-5*tlSz,OBU,"obstacle"),objects.push(h)}else if(4==a){var i=getFromPool();i.create(12*tlSz,groundY-1*tlSz,OBU,"obstacle_horizontal"),objects.push(i)}else if(5==a)if(1==p_djump){var i=getFromPool();i.create(12*tlSz,groundY-1*tlSz,OBU,"obstacle"),objects.push(i);var i=getFromPool();i.create(12*tlSz,groundY-2*tlSz,OBU,"obstacle"),objects.push(i)}else createObstacle();else if(6==a)if(1==p_djump||1==p_glide){var i=getFromPool();i.create(12*tlSz,groundY-1*tlSz,OBU,"obstacle"),objects.push(i);var i=getFromPool();if(i.create(13*tlSz,groundY-1*tlSz,OBU,"obstacle"),objects.push(i),currentScrolling==fastScrollingSpeed&&1==p_glide){var i=getFromPool();i.create(15*tlSz,groundY-1*tlSz,OBU,"obstacle"),objects.push(i)}}else createObstacle();else if(7==a)if(1==p_glide){var i=getFromPool();i.create(12*tlSz,groundY-1*tlSz,OBU,"obstacle"),objects.push(i);var i=getFromPool();if(i.create(12*tlSz,groundY-2*tlSz,OBU,"obstacle"),objects.push(i),currentScrolling==fastScrollingSpeed){var i=getFromPool();i.create(14*tlSz,groundY-1*tlSz,OBU,"obstacle"),objects.push(i);var i=getFromPool();i.create(14*tlSz,groundY-2*tlSz,OBU,"obstacle"),objects.push(i)}}else createObstacle()},createCoin=function(){var a=getFromPool();a.create(12*tlSz,groundY-tlSz*(Math.floor(3*Math.random())+3),imgPath+"coin.png","coin"),objects.push(a);for(var b=0;b<=objects.length-1;b++)objects[b]!=a&&lineDistance({x:a.x,y:a.y},{x:objects[b].x,y:objects[b].y})<tlSz&&a.remove();var c=getFromPool();c.create(12*tlSz,a.y-tlSz,imgPath+"coin.png","coin"),objects.push(c);for(var b=0;b<=objects.length-1;b++)objects[b]!=c&&lineDistance({x:c.x,y:c.y},{x:objects[b].x,y:objects[b].y})<tlSz&&c.remove()},drawUI=function(){x.drawImage(kontra.assets.images[imgPath+"coin.png"],tlSz/3,tlSz/6,tlSz/2,tlSz/2),1==p_jump?x.globalAlpha=1:x.globalAlpha=.2,x.drawImage(kontra.assets.images[imgPath+"jump.png"],4*tlSz,tlSz/6-5,tlSz/1.5,tlSz/1.5),1==p_djump?x.globalAlpha=1:x.globalAlpha=.2,x.drawImage(kontra.assets.images[imgPath+"djum.png"],5*tlSz,tlSz/6-5,tlSz/1.5,tlSz/1.5),1==p_dash?x.globalAlpha=1:x.globalAlpha=.2,x.drawImage(kontra.assets.images[imgPath+"dash.png"],6*tlSz,tlSz/6-5,tlSz/1.5,tlSz/1.5),1==p_glide?x.globalAlpha=1:x.globalAlpha=.2,x.drawImage(kontra.assets.images[imgPath+"glide.png"],7*tlSz,tlSz/6-5,tlSz/1.5,tlSz/1.5),1==p_focus?x.globalAlpha=1:x.globalAlpha=.2,x.drawImage(kontra.assets.images[imgPath+"focus.png"],8*tlSz,tlSz/6-5,tlSz/1.5,tlSz/1.5),1==p_coins?x.globalAlpha=1:x.globalAlpha=.2,x.drawImage(kontra.assets.images[imgPath+"pcoin.png"],9*tlSz,tlSz/6-5,tlSz/1.5,tlSz/1.5),x.globalAlpha=1},startLoop=function(){kontra.gameLoop({update:function(){if(1==gamePhase||0==gamePhase||4==gamePhase){for(var b=0;b<=ground.length-1;b++)ground[b].update();for(var b=0;b<=ground.length-1;b++)1==ground[b].flaggedRemove&&(ground[b].isActive=!1,removeFromArray(ground,ground[b]));currentGDistance+=scrollingSpeed;var c=groundDistance;scrollingSpeed==fastScrollingSpeed&&(c*=1),currentGDistance<c||(currentGDistance=0,createGround())}for(var b=0;b<=pixels.length-1;b++)pixels[b].update();for(var b=0;b<=pixels.length-1;b++)1==pixels[b].flaggedRemove&&(pixels[b].isActive=!1,removeFromArray(pixels,pixels[b]));for(var b=0;b<=bgPixels.length-1;b++)bgPixels[b].update();if(1==blurred&&0==isMuted&&(D.gain.gain.value=.1,E.gain.gain.value=.05),1!=gamePhase&&4!=gamePhase&&5!=gamePhase&&9!=gamePhase||player.animate(),1==gamePhase){powerCounter+=1,powerCounter<newPowerIn-100||(isToChangePower=!0),powerCounter<newPowerIn||(isToChangePower=!0,changePower(),v(),isToChangePower=!1,powerCounter=0),player.update(),house.update();for(var b=0;b<=objects.length-1;b++)objects[b].update();for(var b=0;b<=objects.length-1;b++)1==objects[b].flaggedRemove&&(objects[b].isActive=!1,removeFromArray(objects,objects[b]));if(0==isToChangePower){currentDistance+=scrollingSpeed;var c=obj_distance;scrollingSpeed==fastScrollingSpeed&&(c*=2),currentDistance<c||(currentDistance=0,createObstacle()),currentCoinDistance+=scrollingSpeed;var c=coinDistance;scrollingSpeed==fastScrollingSpeed&&(c*=1.5),currentCoinDistance<c||(currentCoinDistance=0,0==coinPause&&createCoin())}house.x>4*-tlSz&&(house.x-=scrollingSpeed)}else if(0==gamePhase)player.x>tlSz&&(player.x-=scrollingSpeed),player.x>tlSz||(player.x=tlSz,startGame(),A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz)),house.x>4*-tlSz&&(house.x-=scrollingSpeed);else if(4==gamePhase)house.x>2*tlSz?(scrollingSpeed>2&&(scrollingSpeed-=.08),house.x-=scrollingSpeed):gamePhase=5,house.x<10*tlSz&&200==D.tempo&&w(150),house.x<6*tlSz&&(150==D.tempo&&w(120),player.angle=45,player.y=groundY-.8*tlSz),house.x<3*tlSz&&(120==D.tempo&&w(100),player.angle=90,
player.y=groundY-.8*tlSz);else if(9==gamePhase)if(player.x<7*tlSz)player.x+=2;else{player.x=7*tlSz,A.clearRect(0,0,12*tlSz,12*tlSz),x.clearRect(-100,0,a.width+200,a.height),A.clearRect(-100,0,a.width+200,a.height),clearObjects(!0);for(var b=0;b<=lostList.length-1;b++)lostList[b]=null;initVar(!0),initializeGame(!0),gamePhase=0,A.clearRect(0,0,a.width,a.height),A.fillStyle=c1,A.fillRect(0,tlSz/1.1,12*tlSz,tlSz/8),d("x "+coins,1.5,{x:tlSz,y:tlSz/4}),scrollingSpeed=slowScrollingSpeed}else if(8==gamePhase)moon.update();else if(5==gamePhase)if(player.x<2.5*tlSz)player.x+=1;else{gamePhase=6,player.frame=0,player.image.scr=imgPath+"test.png",A.fillStyle=c1,A.fillRect(2.5*tlSz,1.5*tlSz,5*tlSz,5*tlSz),A.fillStyle=c2,d("COINS",1,{x:3.4*tlSz,y:2*tlSz}),d(""+coins,1,{x:6.4*tlSz,y:2*tlSz},!0),setTimeout(function(){A.fillStyle=c2,d("RENT",1,{x:3.4*tlSz,y:2.5*tlSz}),d("-50",1,{x:6.4*tlSz,y:2.5*tlSz},!0)},1e3,this),setTimeout(function(){A.fillStyle=c2,d("TAXES",1,{x:3.4*tlSz,y:3*tlSz}),d("-30",1,{x:6.4*tlSz,y:3*tlSz},!0)},1500,this),setTimeout(function(){A.fillStyle=c2,d("FOOD",1,{x:3.4*tlSz,y:3.5*tlSz}),d("-20",1,{x:6.4*tlSz,y:3.5*tlSz},!0)},2e3,this),A.fillStyle=c3,A.fillRect(3*tlSz,4*tlSz,4*tlSz,tlSz/16);setTimeout(function(){A.fillStyle=c2,d("TOTAL",1,{x:3.4*tlSz,y:4.5*tlSz}),d(""+(coins-100),1,{x:6.4*tlSz,y:4.5*tlSz},!0)},2500,this),coins-100>0?(setTimeout(function(){w(150),A.fillStyle=c3,d("WELL DONE!",1.5,{x:3.6*tlSz,y:5.5*tlSz})},3e3,this),setTimeout(function(){coins>personalBest&&(A.fillStyle=c3,d("NEW PERSONAL BEST!",.5,{x:4.2*tlSz,y:6.1*tlSz}))},4e3,this),setTimeout(function(){gamePhase=8,moon.x=2*tlSz,moon.y=groundY-2*tlSz,moon.angle=1.5,A.clearRect(0,0,12*tlSz,12*tlSz)},5500,this),setTimeout(function(){player.angle=45,player.y=groundY-.8*tlSz},6e3,this),setTimeout(function(){player.angle=0,player.y=groundY-tlSz},6500,this),setTimeout(function(){player.y=1e4,A.fillStyle=c2,d("Congratulations!",2,{x:1.8*tlSz,y:tlSz}),d("You won the day!",2,{x:1.9*tlSz,y:1.8*tlSz})},7e3,this),setTimeout(function(){A.clearRect(0,0,12*tlSz,12*tlSz),A.fillStyle=c2,d("A DAY IN THE LIFE",2,{x:1.8*tlSz,y:tlSz})},1e4,this),setTimeout(function(){A.fillStyle=c2,d("a game by Mattia Fortunati",1,{x:1.8*tlSz,y:1.8*tlSz})},12e3,this),setTimeout(function(){A.fillStyle=c3,d("Thank you for playing!",1,{x:2.8*tlSz,y:4*tlSz})},14e3,this),setTimeout(function(){A.clearRect(0,0,12*tlSz,12*tlSz),A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz)},2e4,this),setTimeout(function(){A.clearRect(0,0,12*tlSz,12*tlSz),A.fillStyle=c2,d("BUT",2,{x:1.8*tlSz,y:tlSz})},21e3,this),setTimeout(function(){A.clearRect(0,0,12*tlSz,12*tlSz),A.fillStyle=c2,d("CAN YOU SURVIVE",2,{x:1.8*tlSz,y:tlSz})},22e3,this),setTimeout(function(){A.fillStyle=c3,d("TOMORROW?",2,{x:1.8*tlSz,y:1.8*tlSz})},23e3,this),setTimeout(function(){A.fillStyle=c3,d("AND TOMORROW",2,{x:1.8*tlSz,y:2.5*tlSz})},24e3,this),setTimeout(function(){A.fillStyle=c3,d("AND TOMORROW",2,{x:1.8*tlSz,y:3.2*tlSz})},25e3,this),setTimeout(function(){A.fillStyle=c3,d("AND TOMORROW?",2,{x:1.8*tlSz,y:3.9*tlSz})},26e3,this),setTimeout(function(){gamePhase=9,this.player.y=groundY-tlSz},25e3,this)):(setTimeout(function(){A.fillStyle=c3,d("NOT ENOUGH!",1.5,{x:3.4*tlSz,y:5.5*tlSz})},3e3,this),setTimeout(function(){e(),s(),player.y=1e4},4e3,this),setTimeout(function(){coins>personalBest&&(A.fillStyle=c3,d("NEW PERSONAL BEST!",.5,{x:4.2*tlSz,y:6.1*tlSz})),gamePhase=7,A.clearRect(0,a.height-.8*tlSz,12*tlSz,3*tlSz),A.fillStyle=c1,d("CLICK TO RETRY",2,{x:2.2*tlSz,y:a.height-.8*tlSz})},4500,this))}},render:function(){x.fillStyle=c1,x.fillRect(0,groundY-tlSz/2,12*tlSz,tlSz/8);for(var b=0;b<=bgPixels.length-1;b++)bgPixels[b].draw();for(var b=0;b<=ground.length-1;b++)ground[b].draw();for(var b=0;b<=objects.length-1;b++)objects[b].draw();house.draw(),player.draw(),8==gamePhase&&moon.draw();for(var b=0;b<=pixels.length-1;b++)pixels[b].draw();1!=gamePhase&&2!=gamePhase&&0!=gamePhase&&3!=gamePhase&&4!=gamePhase&&5!=gamePhase&&6!=gamePhase&&7!=gamePhase||drawUI(),1==flash&&(x.fillStyle=c1,x.fillRect(0,0,a.width,a.height))}}).start()},lineDistance=function(a,b){var c=0,d=0;return c=b.x-a.x,c*=c,d=b.y-a.y,d*=d,Math.sqrt(c+d)},removeFromArray=function(a,b){for(var c=a.indexOf(b);-1!==c;)a.splice(c,1),c=a.indexOf(b)},rotateAndPaintImage=function(a,b,c,d,e,f,g){a.translate(d,e),a.rotate(Math.radians(c)),a.drawImage(b,-tlSz/2,-tlSz/2,f,g),a.rotate(-Math.radians(c)),a.translate(-d,-e)},Math.radians=function(a){return a*Math.PI/180},Math.degrees=function(a){return 180*a/Math.PI},ctx=x,cv=x,sdu=200,sst=-1,document.onkeypress=function(a){a=a||window.event;var b=a.keyCode||a.which,c=String.fromCharCode(b);"m"!=c&&"M"!=c||y()};var C="undefined"!=typeof AudioContext?new AudioContext:new webkitAudioContext,D,E,F,G,H,I,J,K=["E5 e","E6 q"],L=["E4 e","E3 q"],M=["B3 e","D4b e","D4 e","E4 e"],N=["E0 e","F0 e","E0 h"],O=["E2 q","E5 q"],P=["E0 e","A1b e","B0 e","E1 e","E0 e","A1b e","B0 e","E1 e","E0 e","A1b e","B0 e","E1 e","D2 e","D3 e","A1 e","D3 e","D2 e","D3 e","A1 e","D3 e"],Q=["- w","D4 q","- e","A4 e","D4 q","- e","D4 e","E4 q","- e","D4 e","E4 q","- e","D4 e","F4 q","- e","E4 e","G4 e","F4 e","G4 e","F4 e","- e","D4 q","- q","- q","- e","- q","- q","- w","- w","F4 e","D4 q","- e","E4 e","C4 q","- e","F4 e","D4 q","- e","D4 e","F4 e","D4 e","F4 e","F4 e","D4 q","- e","E4 e","C4 q","- e","F4 e","D4 q","- e","D4 e","F4 e","D4 e","F4 e","E4 e","G4 e","E4 e","G4 e","F4 e","E4 e","F4 e","E4 e","D4 q","- w","- w","- w","- w","G4 e","F4 e","E4 e","F4 e","E4 e","D4 q","- w","- w","G4 e","F4 e","E4 e","F4 e","E4 e","D4 q","- w","- w"],D=new TinyMusic.Sequence(C,100,P);E=new TinyMusic.Sequence(C,100,Q),F=new TinyMusic.Sequence(C,100,K),F.loop=!1,F.tempo=300,F.staccato=.55,G=new TinyMusic.Sequence(C,100,N),G.loop=!1,G.tempo=300,G.staccato=.55,H=new TinyMusic.Sequence(C,100,L),H.loop=!1,H.tempo=300,H.smoothing=1,I=new TinyMusic.Sequence(C,100,O),I.loop=!1,I.tempo=300,I.smoothing=1,J=new TinyMusic.Sequence(C,100,M),J.loop=!1,J.tempo=300,D.staccato=.55,E.staccato=.55,D.gain.gain.value=.1,E.gain.gain.value=.05,F.gain.gain.value=.1,G.gain.gain.value=.2,H.gain.gain.value=.1,I.gain.gain.value=.1,J.gain.gain.value=.1,isMuted=!1;</script></body><style>#a {position:fixed;width:99.5vmin;top:49.9%;left:49.9%;transform:translateX(-50%)translateY(-50%);background:#50514f}
#b {position:fixed;width:99.5vmin;top:49.9%;left:49.9%;transform:translateX(-50%)translateY(-50%)}</style></canvas></canvas>