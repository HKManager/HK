var xa=apn.inheritWidget(apn.widgets["apn.wgt.layerContainer"]);xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/spriteAnimation.png",xa.editor.states={play:"Play",loop:"Loop",stop:"Stop"},xa.scriptInfo=void 0,xa.properties.state="stop",xa.properties.attrs={apxAnimate:!0,cfg:{idStep:""}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,apn.widgets["apn.wgt.layerContainer"],"apn.CLayerContainer",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n,{orderedActive:!0})},xa.exeFireStateEvent=void 0,xa.exeSetState=function(e,t,a){a&&("play"==a||"loop"==a?e.wgtAniCheck(e.wgtId(t))>1&&e.wgtAniRun(e.wgtId(t),"play"==a?1:2)&&e.fireEvent("animation","Start",t.apnOID):"stop"==a&&e.wgtAniSet(e.wgtId(t)))},xa.exeOnLoad=function(e,t){function a(a,n){if(a==i.idStep&&n){var r=apn.Project.getStateByObjectID(e.viewer.project,e.getPageID(),t);r&&(apn.UTIL.sort(r,"order",1,!0),r[n.current]&&r[n.current].stateID&&e.wgtSetProperty(t,"apxLayer",r[n.current].stateID))}}var i=e.wgtGetProperty(t,"cfg");i&&i.idStep&&e.wgtTag(i.idStep)&&e.wgtListenProperty(t,"apxStep",a)},xa.edtSetupStep=function(e,t,a,i){var n=e.getScreenData(),r=[{title:apn.CExe.GL({ko:"[없음]",en:"[None]"}),value:""}];for(var o in n.objects)n.objects[o].create&&n.objects[o].create.data&&n.objects[o].create.data.properties&&n.objects[o].create.data.properties.attrs&&n.objects[o].create.data.properties.attrs.apxStep&&r.push({value:o,title:e.itrGetObjectTitle(o)});eduLib.edtInputAdd(e,a,{type:"select",options:r,title:apn.CExe.GL({ko:"연동할 위젯",en:"Widget to interface with"}),key:"idStep",value:i,join:!0})},xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputApplyAll(e,i),e.wgtSetProperty(t,"cfg",n)}var i,n=e.wgtGetProperty(t,"cfg")||{idStep:""};if(i=e.dlgDoModal(600,200,a)){var r=apn.CExe.CSS_SETUP_PANE+"height:"+(i.clientHeight-40)+"px";i.tagTab=i.$TAG("div",{style:"position:relative;font-weight:bold;width:100%;height:26px;padding-bottom:14px;"}),i.tagTab.innerHTML='<span id="tagTab2" style="'+apn.CExe.CSS_SETUP_TAB+'">'+apn.CExe.GL({ko:"스텝 연동",en:"Step Interface"})+"</span>"+apn.CExe.CSS_SETUP_TAB_END,i.tagTab2=i.$TAG("div",{style:r}),this.edtSetupStep(e,t,i.tagTab2,n),i.tagTab.$$("tagTab2").style.borderStyle="solid solid none solid",i.tagTab.$$("tagBlank").style.width=i.clientWidth-i.tagTab.$$("tagBlank").offsetLeft-1+"px"}},xa.WGTS_SHOW=["edu.wgt.animSprite","apn.wgt.rect","apn.wgt.singleText","apn.wgt.roundRect","apn.wgt.ellipse","apn.wgt.line","apn.wgt.image2","apn.wgt.polygon","apn.wgt.video","apn.wgt.itrAreaRect","apn.wgt.itrAreaEllipse","ux.wgt.imgSprite","ux.wgt.shtSprite"],xa.onEdit=function(e,t){apn.widgets.utils.editWidget(e.getObjectByID(t),e,2,!0,{wgtsShow:this.WGTS_SHOW,layerTitleFromOrder:!0,layerDuration:apx.wgt.spriteDefaultFrameDuration,layerOrdering:!0,layerScrollbar:"always"})},eduWgtAnimSprite=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.sceneContainer"]),xa.exeItrNoResize=!0,xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/sceneAnimation.png",xa.editor.states={play:"Play",loop:"Loop",stop:"Stop",stopL:"StopAtLast"},xa.properties.state="stop",xa.properties.attrs={apxAnimate:!0,ver:2,ofl:""},xa.exeSetState=function(e,t,a,i){function n(e,t){return void 0===e.order&&void 0===t.order?0:void 0===e.order?1:void 0===t.order?-1:e.order-t.order}if(a)if(i||"stopL"!=a||(a="stop"),"stopL"==a){var r=apn.Project.getStateByObjectID(e.project,e.getPageID(),t.apnOID);r&&r.length>0&&(r.sort(n),e.wgtAniSet(e.wgtId(t),void 0,r[r.length-1].title))}else eduWgtAnimSprite.exeSetState.call(this,e,t,a)},xa.exeOnLoad=eduWgtAnimSprite.exeOnLoad,xa.onEdit=function(e,t){apn.widgets.utils.editWidget(e.getObjectByID(t),e,1,!0,{layerTitleFromOrder:!0,layerDuration:apx.wgt.spriteDefaultFrameDuration,layerOrdering:!0,layerScrollbar:"always",wgtsShow:apn.widgets["apn.wgt.sceneContainer"].WGTS_SHOW,editNoGroup:!0})},eduWgtAnimScene=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.layerContainer"]),xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/common/icon_thumb.png",xa.properties.attrs={apxAnimateHolder:!0},xa.exeSetState=void 0,xa.onEdit=function(e,t){apn.widgets.utils.editWidget(e.getObjectByID(t),e,2,!0,{layerTitlePrefix:"State",layerScrollbar:"always"})},eduWgtAnimHolder=xa,xa=apn.inheritWidget(eduWgtAnimHolder),xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/sceneAnimation.png",xa.properties.attrs={apxAnimateHolder:!0},xa.exeSetState=function(e,t,a,n){var r,o,d=e.screen.objects[t.apnOID].layout.layers;for(i in d)for(r=e.getWidgetsByProperty("apxAnimate",d[i].id),o=0;o<r.length;o++)i!=a?e.wgtSetProperty(r[o],"apxState","stop"):e.wgtSetProperty(r[o],"apxState","loop");a!=n&&e.fireEvent("stateChange",a,t.apnOID)},xa.exeOnStart=function(e,t){var a=this;setTimeout(function(){a.exeSetState(e,e.wgtTag(t),e.stateGetActive(t))},0)},eduWgtAnimHolder2=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.audio"]);xa.scriptInfo={wgtData:{background:{help:{ko:"Boolean\n페이지 종료 후 계속 Play할지 여부",en:"Boolean\nPlay on background after page end"}}}},void 0!==xa.properties.attrs.stp&&delete xa.properties.attrs.stp,xa.editor.states=void 0,xa.exeSetState=function(e,t,a,i){if(apn.widgets["apn.wgt.audio"].exeSetState.call(this,e,t,a,i),0==a.indexOf("T:")){var n=parseInt(a.substring(2));t.apnPlayList&&t.apnPlayList[n-1]?e.wgtControlMedia(t.apnOID,"play",n,!0):e.log(t.apnOID,"Invalid track is requested to play. TrackId="+n)}},xa.exeOnLoad=function(e,t){function a(e,a){e==t&&(r.apxBackgroundRun=a)}apn.widgets["apn.wgt.audio"].exeOnLoad.call(this,e,t);var i,n,r=e.wgtTag(t);if(n=e.wgtGetProperty(t,"URLs"))for(var o=0;o<n.length;o++)n[o].URL&&(i=i||[],i.push(n[o].URL));else if(n=e.wgtGetProperty(t,"list"))for(var o=0;o<n.length;o++)n[o].audio.mediaID&&(i=i||[],i.push(n[o].audio.mediaID));i&&i.length&&(this.exeAssetLoad(e,e.wgtTag(t),i),r._mediaLoaded=!0),e.wgtGetProperty(t,"background")?r.apxBackgroundRun=!0:e.wgtGetProperty(t,"cfg")&&"Y"==e.wgtGetProperty(t,"cfg").bg&&(r.apxBackgroundRun=!0),e.wgtListenProperty(t,"background",a)},xa.exeOnStart=function(e,t){apn.widgets["apn.wgt.audio"].exeOnStart.call(this,e,t),this.exeOnResume(e,t)},xa.exeOnResume=function(e,t){var a=e.wgtTag(t);if(!a._mediaLoaded){var i;i=e.ctxGet("eduAudioPlayList"),i&&i.length&&this.exeAssetLoad(e,e.wgtTag(t),i)}},xa.exeInputGet=function(e,t){var a;if(t._newList)a=t._newList;else{a=[];var i=e.wgtGetProperty(t.apnOID,"list");if(i)for(var n=0;n<i.length;n++)i[n].audio.mediaID&&a.push(i[n].audio.mediaID)}return JSON.stringify(a)},xa.edtOnInputGet=function(e,t,a){var i,n=[];if((i=e.pages[t].objects[a].create.data)&&i.properties&&i.properties.attrs&&i.properties.attrs.list)for(var r=i.properties.attrs.list,o=0;o<r.length;o++)r[o].audio.mediaID&&n.push(r[o].audio.mediaID);return JSON.stringify(n)},xa.exeInputSet=function(e,t,a){var i;try{i=JSON.parse(a)}catch(e){}if(i&&i instanceof Array&&i.length){this.exeAssetLoad(e,t,i),t._mediaLoaded=!0,t._newList=i;var n=e.wgtGetProperty(t.apnOID,"list");n.length=0;for(var r=0;r<i.length;r++)n.push({audio:{mediaID:i[r]}})}else e.log(t.apnOID,"Invalid value is set, value="+a)},xa.exeMediaSupportTrack=function(e,t){if(!(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeEventCache))return null;var a=e.objects[t].create.data;return!(a&&a.properties&&a.properties.attrs&&2==a.properties.attrs.v&&a.properties.attrs.noMultiTrack)},xa.onEdit=void 0,xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputApplyAll(e,r),e.wgtSetProperty(t,"URLs",d),e.wgtSetProperty(t,"mdaSync",o.mdaSync)}function i(){eduLib.edtInputDestroy(e,r)}function n(){eduLib.edtInputApplyAll(e,r),p.apxApCH&&(p.apxApCH=parseInt(p.apxApCH)),s[0]&&s[0].audio.mediaID&&e.wgtSetProperty(t,"apxMediaID",s[0].audio.mediaID),void 0!==p.bg&&delete p.bg,e.wgtSetProperty(t,"list",s),e.wgtSetProperty(t,"cfg",p),e.wgtSetProperty(t,"background","Y"==l.background),e.wgtSetProperty(t,"mdaSync",o.mdaSync),i()}var r,o={mdaSync:e.wgtGetProperty(t,"mdaSync")};if(e.wgtGetProperty(t,"URLs")){var d=e.wgtGetProperty(t,"URLs");(r=e.dlgDoModal(900,400,a))&&(e.wgtGetProperty(t,"noMultiTrack")?eduLib.edtInputAdd(e,r,{type:"table",value:d,options:{th:["Audio URL"]},td:[{type:"text",key:"URL"}],join:!0}):eduLib.edtInputAdd(e,r,{type:"table",value:d,options:{th:["Audio URL"],add:!0,remove:!0},td:[{type:"text",key:"URL"}],join:!0}),eduLib.edtInputAdd(e,r,{type:"space"}),apn.widgets["apn.wgt.video"]._edtOnConfigMdaSync(e,r,o))}else{var s=e.wgtGetProperty(t,"list"),p=e.wgtGetProperty(t,"cfg")||{};s=s||[{audio:{mediaID:void 0}}];var l={background:"N"},u=e.wgtGetProperty(t,"background");if(void 0!==u?u&&(l.background="Y"):void 0!==p.bg&&"Y"==p.bg&&(l.background="Y"),r=e.dlgDoModal(900,Math.floor(.8*bx.UX.height),n,i)){if(eduLib.edtInputAdd(e,r,{type:"table",value:s,options:{th:["Audio","Comment"],add:!0,remove:!0,order:!0},td:[{type:"audio",key:"audio",acceptFileName:!0},{type:"text",key:"cmt",width:"400px"}],join:!0}),eduLib.edtInputAdd(e,r,{type:"space"}),apn.widgets["apn.wgt.video"]._edtOnConfigMdaSync(e,r,o),eduLib.edtInputAdd(e,r,{type:"space"}),apn.CExe.IWidget_getAudioAutoplayCount(e.getData())){for(var g=[],c=0;c<apn.CExe.IWidget_getAudioAutoplayCount(e.getData());c++)g.push({title:c+1,value:c+1});g.push({title:apn.CExe.GL({ko:"[사용안함]",en:"[Not use]"}),value:""}),eduLib.edtInputAdd(e,r,{type:"title",title:apn.CExe.GL({ko:"자동재생 채널을 통하여 재생",en:"Use autoplay channel"})}),eduLib.edtInputAdd(e,r,{type:"select",title:apn.CExe.GL({ko:"채널 ID",en:"Channel ID"}),value:p,key:"apxApCH",options:g,join:!0}),eduLib.edtInputAdd(e,r,{type:"space"})}eduLib.edtInputAdd(e,r,{type:"title",title:"More options"}),eduLib.edtInputAdd(e,r,{type:"select",title:"Background play",value:l,key:"background",options:[{title:"Yes",value:"Y"},{title:"No",value:"N"}],join:!0})}}},xa.edtOnBuildState=function(e,t,a,i){for(var n in apn.widgets["apn.wgt.audio"].editor.states)i[n]=apn.widgets["apn.wgt.audio"].editor.states[n];var r=e.pages[a].objects[t].create.data;if(!(r&&r.properties&&r.properties.attrs&&r.properties.attrs.v>=2)){var o=1;if(r&&r.properties&&r.properties.attrs&&r.properties.attrs.URLs)for(n=0;n<r.properties.attrs.URLs.length;n++)r.properties.attrs.URLs[n].URL&&(i["T:"+o]="PlayTrack "+o,o++);else if(r&&r.properties&&r.properties.attrs&&r.properties.attrs.list)for(n=0;n<r.properties.attrs.list.length;n++)r.properties.attrs.list[n].audio.mediaID&&(i["T:"+o]="PlayTrack "+o,o++)}},xa.edtOnBuildEvent=function(e,t,a,n){var r=1,o=e.pages[a].objects[t].create.data;if(o&&o.properties&&o.properties.attrs&&o.properties.attrs.URLs)for(i=0;i<o.properties.attrs.URLs.length;i++)o.properties.attrs.URLs[i].URL&&(n.media.param["trS_"+r]="TrackStart"+r,n.media.param["trE_"+r]="TrackEnd"+r,n.media.param["trEN_"+r]="TrackEndNormal"+r,r++);else if(o&&o.properties&&o.properties.attrs&&o.properties.attrs.list)for(i=0;i<o.properties.attrs.list.length;i++)o.properties.attrs.list[i].audio.mediaID&&(n.media.param["trS_"+r]="TrackStart"+r,n.media.param["trE_"+r]="TrackEnd"+r,n.media.param["trEN_"+r]="TrackEndNormal"+r,r++)},eduWgtAudioPlayer=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.audio"]);xa.scriptInfo=xa.scriptInfo||{},xa.scriptInfo.wgtData=xa.scriptInfo.wgtData||{},xa.scriptInfo.wgtData.background={help:{ko:"Boolean\n페이지 전환 후에도 계속 재생할지 여부입니다.",en:"Boolean\nPlay on background after page switch"}},xa.editor.states=void 0,xa.exeInputSet=eduWgtAudioPlayer.exeInputSet,xa.exeInputGet=eduWgtAudioPlayer.exeInputGet,xa.edtOnInputGet=eduWgtAudioPlayer.edtOnInputGet,xa.properties=xa.properties||{},xa.properties.attrs=xa.properties.attrs||{},xa.properties.attrs.list=[{audio:{mediaID:void 0}}],xa.properties.attrs.noMultiTrack=!0,xa.properties.attrs.background=!1,void 0!==xa.properties.attrs.apxStep&&delete xa.properties.attrs.apxStep,void 0!==xa.properties.attrs.stp&&delete xa.properties.attrs.stp,xa.exeSetState=function(e,t,a,i){if(apn.widgets["apn.wgt.audio"].exeSetState.call(this,e,t,a,i),0==a.indexOf("T:")){for(var n,r=parseInt(a.substring(2)),o=e.wgtGetProperty(t.apnOID,"list"),d=0,s=0;s<o.length;s++)if(o[s].audio.mediaID&&(d++,d==r)){t.apnTrackPlayIdx=r,this.exeAssetLoad(e,t,o[s].audio.mediaID),e.wgtControlMedia(t.apnOID,"play"),n=!0;break}n||e.log(t.apnOID,"Invalid track is requested to play. TrackId="+r)}},xa.exeOnLoad=function(e,t){function a(e,a){e==t&&(n.apxBackgroundRun=a)}apn.widgets["apn.wgt.audio"].exeOnLoad.call(this,e,t);var i,n=e.wgtTag(t);if(listPrp=e.wgtGetProperty(t,"list"))for(var r=0;r<listPrp.length;r++)if(listPrp[r].audio.mediaID){i=listPrp[r].audio.mediaID;break}i&&(n.apnTrackPlayIdx=1,this.exeAssetLoad(e,e.wgtTag(t),i)),e.wgtGetProperty(t,"background")&&(n.apxBackgroundRun=!0),e.wgtListenProperty(t,"background",a)},xa.exeMediaSupportTrack=function(e,t){return 1},xa.onEdit=void 0,xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputDestroy(e,n)}function i(){eduLib.edtInputApplyAll(e,n),o.apxApCH&&(o.apxApCH=parseInt(o.apxApCH)),r[0]&&r[0].audio.mediaID&&e.wgtSetProperty(t,"apxMediaID",r[0].audio.mediaID),e.wgtSetProperty(t,"list",r),e.wgtSetProperty(t,"cfg",o),e.wgtSetProperty(t,"background","Y"==d.background),e.wgtSetProperty(t,"mdaSync",d.mdaSync),a()}var n,r=e.wgtGetProperty(t,"list"),o=e.wgtGetProperty(t,"cfg")||{},d={mdaSync:e.wgtGetProperty(t,"mdaSync"),background:e.wgtGetProperty(t,"background")===!0?"Y":"N"};if(n=e.dlgDoModal(900,Math.floor(.8*bx.UX.height),i,a)){if(eduLib.edtInputAdd(e,n,{type:"table",value:r,options:{th:["Audio","Comment"],add:!0,remove:!0,order:!0},td:[{type:"audio",key:"audio",acceptFileName:!0},{type:"text",key:"cmt",width:"400px"}],join:!0}),eduLib.edtInputAdd(e,n,{type:"space"}),apn.widgets["apn.wgt.video"]._edtOnConfigMdaSync(e,n,d),apn.CExe.IWidget_getAudioAutoplayCount(e.getData())){for(var s=[],p=0;p<apn.CExe.IWidget_getAudioAutoplayCount(e.getData());p++)s.push({title:p+1,value:p+1});s.push({title:apn.CExe.GL({ko:"[사용안함]",en:"[Not use]"}),value:""}),eduLib.edtInputAdd(e,n,{type:"space"}),eduLib.edtInputAdd(e,n,{type:"title",title:apn.CExe.GL({ko:"자동재생 채널을 통하여 재생",en:"Use autoplay channel"})}),eduLib.edtInputAdd(e,n,{type:"select",title:apn.CExe.GL({ko:"채널 ID",en:"Channel ID"}),value:o,key:"apxApCH",options:s,join:!0})}eduLib.edtInputAdd(e,n,{type:"space"}),eduLib.edtInputAdd(e,n,{type:"title",title:apn.CExe.GL(apn.CExe.TXT_SETUP_OPTS)}),eduLib.edtInputAdd(e,n,{type:"select",title:apn.CExe.GL({ko:"페이지 전환 후에도 계속 재생",en:"Background play after page switch"}),value:d,key:"background",options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:"N"}],join:!0})}},xa.edtOnBuildState=function(e,t,a,i){for(var n in apn.widgets["apn.wgt.audio"].editor.states)i[n]=apn.widgets["apn.wgt.audio"].editor.states[n];var r=e.pages[a].objects[t].create.data,o=1;if(r&&r.properties&&r.properties.attrs&&r.properties.attrs.URLs)for(n=0;n<r.properties.attrs.URLs.length;n++)r.properties.attrs.URLs[n].URL&&(i["T:"+o]="PlayTrack "+o,o++);else if(r&&r.properties&&r.properties.attrs&&r.properties.attrs.list)for(n=0;n<r.properties.attrs.list.length;n++)r.properties.attrs.list[n].audio.mediaID&&(i["T:"+o]="PlayTrack "+o,o++)},xa.edtOnBuildEvent=function(e,t,a,i){eduWgtAudioPlayer.edtOnBuildEvent.call(this,e,t,a,i),delete i.media.param.trackStart,delete i.media.param.trackEnd,delete i.media.param.trackEndN},eduWgtAudioPlayerMF=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.video"]);xa.exeAssetDelayedLoad=!0,xa.exeOnLoad=function(e,t){apn.widgets["apn.wgt.video"].exeOnLoad.call(this,e,t);var a,i,n=e.wgtTag(t);if(i=e.wgtGetProperty(t,"URLs")){for(var r,o=0;o<i.length;o++)if(i[o].subURL){r=!0;break}for(var o=0;o<i.length;o++)r?(i[o].vURL||i[o].subURL)&&(a=a||{main:[],sub:[]},a.main.push(i[o].vURL),a.sub.push(i[o].subURL)):i[o].vURL&&(a=a||[],a.push(i[o].vURL))}else if(i=e.wgtGetProperty(t,"list"))for(var o=0;o<i.length;o++)i[o].video.mediaID&&(a=a||[],a.push(i[o].video.mediaID));a&&(a.length||a.main&&a.main.length)&&(this.exeAssetLoad(e,e.wgtTag(t),a),n._mediaLoaded=!0)},xa.exeOnStart=xa.exeOnResume=function(e,t){var a=e.wgtTag(t);if(!a._mediaLoaded){var i;i=e.ctxGet("eduVideoPlayList"),i&&i.length&&this.exeAssetLoad(e,e.wgtTag(t),i)}},xa.exeInputGet=function(e,t){var a;if(t._newList)a=t._newList;else{a=[];var i=e.wgtGetProperty(t.apnOID,"list");if(i)for(var n=0;n<i.length;n++)i[n].video.mediaID&&a.push(i[n].video.mediaID);else{var r=e.wgtGetProperty(t.apnOID,"URLs");if(r)for(var n=0;n<r.length;n++)r[n].vURL&&a.push(r[n].vURL)}}return JSON.stringify(a)},xa.edtOnInputGet=function(e,t,a){var i,n=[];if((i=e.pages[t].objects[a].create.data)&&i.properties&&i.properties.attrs&&i.properties.attrs.list)for(var r=i.properties.attrs.list,o=0;o<r.length;o++)r[o].video.mediaID&&n.push(r[o].video.mediaID);else if(i&&i.properties&&i.properties.attrs&&i.properties.attrs.URLs)for(var r=i.properties.attrs.URLs,o=0;o<r.length;o++)r[o].vURL&&n.push(r[o].vURL);return JSON.stringify(n)},xa.exeInputSet=function(e,t,a){var i;try{i=JSON.parse(a)}catch(e){i=a}i&&i instanceof Array||(i=[i]),i[0]?(this.exeAssetLoad(e,t,i),t._mediaLoaded=!0):(apn.widgets["apn.wgt.video"].exeMediaClear(e,t.apnOID),t._mediaLoaded=!1),t._newList=i;var n=e.wgtGetProperty(t.apnOID,"URLs");if(n){n.length=0;for(var r=0;r<i.length;r++)n.push({vURL:i[r]})}},xa.exeMediaSupportTrack=function(e,t){if(!(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeEventCache))return null;var a=e.objects[t].create.data;return!(a&&a.properties&&a.properties.attrs&&2==a.properties.attrs.v&&a.properties.attrs.noMultiTrack)},xa.onEdit=void 0,xa.edtOnConfig=function(e,t){function a(){l.mediaID&&e.setSubMediaToObject(t,l.mediaID,!1)}function i(){function i(t,i){i&&(t.setMedia(i),l&&a(),e.draw())}eduLib.edtInputApplyAll(e,d),e.wgtSetProperty(t,"URLs",p),e.wgtSetProperty(t,"mdaSync",s.mdaSync),r&&e.wgtSetProperty(t,"apxMediaSubFormat",!0),p[0]&&p[0].vURL?e.getObjectByID(t).resolveSnapshot(i):l&&a()}function n(){eduLib.edtInputApplyAll(e,d),u[0]&&u[0].video.mediaID&&e.wgtSetProperty(t,"apxMediaID",u[0].video.mediaID),e.wgtSetProperty(t,"list",u),e.wgtSetProperty(t,"mdaSync",s.mdaSync)}var r,o=apn.Project.getExeModule(e.getData());o.IStub_getConfiguration&&o.IStub_getConfiguration()&&o.IStub_getConfiguration().mediaMultiFormat&&(r=!0),e.wgtGetProperty(t,"apxMediaSubFormat")&&(r=!0);var d,s={mdaSync:e.wgtGetProperty(t,"mdaSync")};if(e.wgtGetProperty(t,"URLs")){var p=e.wgtGetProperty(t,"URLs"),l=e.wgtGetProperty(t,"apxPoster");(d=e.dlgDoModal(800,520,i))&&(e.wgtGetProperty(t,"noMultiTrack")?(r?eduLib.edtInputAdd(e,d,{type:"table",value:p,options:{th:["Video URL","Alternative URL"]},td:[{type:"text",key:"vURL"},{type:"text",key:"subURL"}],join:!0}):eduLib.edtInputAdd(e,d,{type:"table",value:p,options:{th:["Video URL"]},td:[{type:"text",key:"vURL"}],join:!0}),l&&(eduLib.edtInputAdd(e,d,{type:"space"}),eduLib.edtInputAdd(e,d,{type:"title",title:apn.CExe.GL({ko:"포스터 이미지",en:"Poster image"})}),eduLib.edtInputAdd(e,d,{type:"image",title:apn.CExe.GL({ko:"이미지",en:"Image"}),value:e.getObjectByID(t).data.properties.attrs,key:"apxPoster",join:!0}))):eduLib.edtInputAdd(e,d,{type:"table",value:p,options:{th:["Video URL"],add:!0,remove:!0},td:[{type:"text",key:"vURL"}]}),eduLib.edtInputAdd(e,d,{type:"space"}),apn.widgets["apn.wgt.video"]._edtOnConfigMdaSync(e,d,s))}else{var u=e.wgtGetProperty(t,"list");u=u||[{video:{mediaID:void 0}}],(d=e.dlgDoModal(600,600,n))&&(eduLib.edtInputAdd(e,d,{type:"table",value:u,options:{th:["Video"],add:!0,remove:!0},td:[{type:"video",key:"video"}],join:!0}),eduLib.edtInputAdd(e,d,{type:"space"}),apn.widgets["apn.wgt.video"]._edtOnConfigMdaSync(e,d,s))}},eduWgtVideoPlayer=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.roundRect"]);xa.apdConfigReadOnly=!0,xa.apxTextPlainMulti=!0,xa.apxTextAlignJustify=!0,xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/subtitle.png",xa.styles=xa.styles||{},xa.styles.textMultiLine=!0,xa.styles.lineWidth=0,xa.properties=xa.properties||{},xa.properties.attrs={apxMediaSubtitle:!0,v:"2",vJ:!0,subs:[{track:1,stime:"00:00:00",etime:"00:01:99",text:"",pOes:"N"}],cfg:{colorFocus:"#ff0000",vtt:{size:0,data:""},mode:"",modeClr:null,ptpClr:null,txt:"",idMedia:"",idTarget:"",yMrg:"1"}},xa.properties.state="r",xa.scriptInfo={wgtData:{subtitle:{help:{ko:"String\n자막파일 지정. WebVTT만 지원합니다. ('value'값에 의해서도 데이터 지정이 가능합니다.)",en:"String\nSet subtitle file. 'WebVTT' format is supported. (Also, this information can be set by 'value'.)"},value:"",type:"so"}},wgtRun:{play:{param:"{index:0-based|'next'|'prev'|'clear'|'reset', playSection:Boolean}",help:{en:"Play the media section by subtitle information",ko:"자막 구간을 Play합니다.\n'index'에 자막의 번호, 'next' 및 'prev'로 구간을 지정할 수 있습니다.\n'playSection'이 true이면 해당 구간으로 영역이 제한됩니다.\n'index'에서 'clear'값은 지정된 Section을 해제하는 기능입니다."}}}},xa.createAsCanvasObject=function(e,t,a,i,n){return n&&n.attrs&&"2a"==n.attrs.v?(n.attrs.URL="DB/EDU/imgs/wgts/edit/mediaAnnt.png",apn.IWidget.createCanvasObject(e,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n,void 0,apn.CEditorS.NO_RESIZE)):apn.widgets["apn.wgt.roundRect"].createAsCanvasObject.call(this,e,t,a,i,n)},xa.exeOnScreenRefresh=function(e,t,a){var i=e.wgtGetProperty(t,"cfg");if(i.ptp&&"N"!=i.ptp){var n=e.wgtTag(t);if(2==n.apnCur._apnWgtRectTV)return;var r,o=!0;if(a&&a.font&&a.font!=e.wgtGetProperty(t,"apxFont",!0)&&(o=!1),o&&(r=e.wgtGetProperty(t,"apxText"))&&n.textTag){var d=!1;if(!bx.DOM.isVisible(n)){var s,p;d=!0,s=n.style.display,n.style.display="block",n.style.visibility="hidden",p=n.parentNode,document.body.appendChild(n)}var l=n.clientWidth-2*bx.$checkNaN(parseInt(n.style.padding)),u=n.clientHeight-2*bx.$checkNaN(parseInt(n.style.padding));n.textTag.scrollWidth&&n.textTag.scrollWidth>l||n.textTag.scrollHeight&&n.textTag.scrollHeight>u?(void 0===n._apxTextBkPadding&&(n._apxTextBkPadding=n.style.padding),n.style.padding=Math.max(0,Math.floor(bx.$checkNaN(parseInt(n.style.padding))-Math.max(n.textTag.scrollWidth-l,n.textTag.scrollHeight-u)/2))+"px"):void 0!==n._apxTextBkPadding&&(n.style.padding=n._apxTextBkPadding),d&&(n.style.visibility="visible",n.style.display=s,p.appendChild(n))}}else apn.widgets["apn.wgt.roundRect"].exeOnScreenRefresh.call(this,e,t,a)},xa.exeOnLoad=function(e,t){function a(a,i,n){var r;"trackStart"==a?d.ctx.curTrack=n:"infoPlayTime"==a?(r=l._findkSub(e,t,i),r==d.ctx.curSub?r=void 0:d.ctx.curSub=r):"trackEnd"==a&&(r=-1,d.ctx.curSub=r),r==-1?e.wgtSetProperty(t,"apxText",""):r>=0&&e.wgtSetProperty(t,"apxText","[[HTML]]"+(s[r].text||"").replace(/\[\[/g,'<span style="font-family:inherit;color:'+p.colorFocus+';">').replace(/\]\]/g,"</span>"))}function i(a,i){if(a==t&&i&&void 0!==i.index&&d.ctx.times.length){if(d.ctx.curSection=void 0,"clear"==i.index||"reset"==i.index)return void(d.ctx&&d.ctx.idMedia&&(e.wgtSetProperty(d.ctx.idMedia,"playSection",void 0),"reset"==i.index&&(d.ctx.curSub=-1)));if("next"==i.index?void 0===d.ctx.curSub?i.index=0:i.index=(d.ctx.curSub+1)%d.ctx.times.length:"prev"==i.index&&(void 0===d.ctx.curSub?i.index=0:i.index=(d.ctx.curSub-1+d.ctx.times.length)%d.ctx.times.length),d.ctx&&d.ctx.idMedia&&d.ctx.times[i.index]&&void 0!==d.ctx.times[i.index].stime){var n=apn.Project.getWidgetModule(e.screen.objects[d.ctx.idMedia].create.data);if(n&&n.exeMediaSeek){if(i.playSection){var r={from:d.ctx.times[i.index].stime,to:d.ctx.times[i.index].etime};e.wgtSetProperty(d.ctx.idMedia,"playSection",r),d.ctx.curSection=r}n.exeMediaSeek(e.wgtTag(d.ctx.idMedia),d.ctx.times[i.index].stime,!0)}}}}function n(e,a){e==t&&a&&void 0!==a.index&&s[a.index]&&(a.pauseOnStart===!0?s[a.index].pOes="Y":a.pauseOnStart===!1&&(s[a.index].pOes="N"))}function r(e,t,a){"seeked"==e&&(d.ctx._seeked=!0)}function o(a,i){if(a==t&&i){var n=[],r={message:""};if(l._vttParse(i,n,r)){for(var o=0;o<n.length;o++)n[o].stime=l._timeToSec(n[o].stime),n[o].etime=l._timeToSec(n[o].etime);l.exeInputSet(e,d,n)}r.message&&e.log(t,"WebVTT format error: "+r.message)}}var d=e.wgtTag(t),s=e.wgtGetProperty(t,"subs"),p=e.wgtGetProperty(t,"cfg"),l=this;if("2a"==e.wgtGetProperty(t,"v")&&(d.style.display="none"),e.wgtGetProperty(t,"v")){if(!p.idMedia||!e.wgtTag(p.idMedia))return e.log(t,"Media widget is not set for this widget."),!1;d.ctx={},d.ctx.idMedia=p.idMedia}else{var u=e.getWidgetsByProperty("apxMediaControl"),g=e.getWidgetsByProperty("apxMediaControl");if(!u.length)return e.log(t,"No media widget is in this page."),!1;for(var c=apn.Project.findParentOf(e.screen,t,void 0,!0),x=0;x<g.length;x++)c&&c!=apn.Project.findParentOf(e.screen,g[x],void 0,!0)&&(g.splice(x,1),x--);d.ctx={},d.ctx.idMedia=this._closest(e,t,g)||this._closest(e,t,u)}d.ctx.curSub=-1,d.ctx.curTrack=1,d.ctx.curSection=void 0,e.wgtGetProperty(t,"v")?(d.ctx.curSub=void 0,e.wgtListenProperty(t,"play",i),e.wgtListenProperty(t,"track",n),e.wgtListenMedia(t,d.ctx.idMedia,r)):e.wgtListenMedia(t,d.ctx.idMedia,a),e.wgtGetProperty(t,"cfg").mode?this._setupSpaned(e,t,p,s):e.wgtSetProperty(t,"apxText",""),d.ctx.times=[];for(var x=0;x<s.length;x++)d.ctx.times.push({track:s[x].track,stime:this._timeToSec(s[x].stime),etime:this._timeToSec(s[x].etime),text:s[x].text});e.wgtListenProperty(t,"subtitle",o)},xa.exeSetState=function(e,t,a,i){function n(e){for(var t=0;t<s.length;t++)if(s[t].text==e)return t;return-1}var r,o,d=e.wgtGetProperty(t.apnOID,"v"),s=e.wgtGetProperty(t.apnOID,"subs");"p"==a[0]&&(o={index:"clear"}),"pNxt"==a?r={index:"next"}:"pPrv"==a?r={index:"prev"}:0==a.indexOf("p_")?"2a"==d?n(a.substring(2))>=0&&(r={index:n(a.substring(2))}):r={index:parseInt(a.substring(2))-1}:"sNxt"==a?r={index:"next",playSection:!0}:"sPrv"==a?r={index:"prev",playSection:!0}:0==a.indexOf("s_")?"2a"==d?n(a.substring(2))>=0&&(r={index:n(a.substring(2)),playSection:!0}):r={index:parseInt(a.substring(2))-1,playSection:!0}:"sC"==a&&(r={index:"clear"}),r&&o&&e.wgtSetProperty(t.apnOID,"play",o),r&&e.wgtSetProperty(t.apnOID,"play",r)},xa._setupSpaned=function(e,t,a,i){var n=e.wgtTag(t),r=this._buildText(e,t),o="[[HTML]]"+r.replace(/\[\[/g,'<span style="font-family:inherit;color:'+a.colorFocus+';">').replace(/\]\]/g,"</span>");if(e.wgtGetProperty(t,"apxText")!=o&&e.wgtSetProperty(t,"apxText",o),a.ptp&&"N"!=a.ptp)for(var d,s=0;s<i.length;s++)(d=n.$$(s+"C"))&&(n.$$(s+"S")&&(n.$$(s+"S").style.cursor="apn.auto"==apn.Project.resolveStyle(e.project,"csr",e.wgtGetProperty(t,"apxCursor"))?"pointer":"inherit"),d.apxOnEventOver=function(e,t){t?(a.ptpClr&&(this.style.backgroundColor=a.ptpClr),"Y"==a.ptpBold&&(this.style.fontWeight="bold")):(a.ptpClr&&(this.style.backgroundColor="transparent"),"Y"==a.ptpBold&&(this.style.fontWeight="inherit"))},d.apxOnEvent=function(e,i){"tapStart"==i&&e.wgtSetProperty(t,"play",{index:parseInt(this.id),playSection:"R"==a.ptp})})},xa.exeOnStart=function(e,t){var a=e.wgtGetProperty(t,"cfg");if(a.idTarget&&e.wgtTag(a.idTarget)&&(e.wgtTag(a.idTarget).style.display="none"),this.apxTextPlainMulti){var i=e.wgtTag(t),n=this;i.apnOnPostSetText=function(i,r){var o=n._buildTextPlain(e,t);e.wgtSetProperty(t,"apxTextPlainMulti",{txt:o,lnToTag:!0}),a.mode&&n._setupSpaned(e,t,a,e.wgtGetProperty(t,"subs"))};var r=this._buildTextPlain(e,t);r&&i.apnOnPostSetText(i,r)}},xa.exeOnTick=function(e,t,a){function i(a){var i=e.wgtGetProperty(t,"subs");if(a==n.ctx.curSub?a=void 0:n.ctx.curSub=a,"2a"==e.wgtGetProperty(t,"v")){if(a==-1||a>=0&&!i[a].text)r.idTarget&&e.wgtTag(r.idTarget)&&(e.wgtTag(r.idTarget).style.display="none"),e.fireEvent("wgtEvent","[None]",t,!1,!0);else if(a>=0&&i[a].text){if(r.idTarget&&e.wgtTag(r.idTarget)){e.wgtTag(r.idTarget).style.display="block";var d=apn.Project.getStateByObjectID(e.project,e.getPageID(),r.idTarget);if(d)for(var s=0;s<d.length;s++)if(d[s].title==i[a].text){e.stateLayerActivate(r.idTarget,d[s].stateID),e.stateSetActive(r.idTarget,d[s].stateID);break}}e.fireEvent("wgtEvent",i[a].text,t,!1,!0),"Y"==i[a].pOes&&e.wgtControlMedia(n.ctx.idMedia,"pause")}}else{if(r.mode){var p;if(void 0!==a)for(var s=0;s<i.length;s++)(p=n.$$(s+"S"))&&(s==a?"s1"==r.mode?(r.modeClr&&(p.style.color=r.modeClr),"Y"==r.modeBold&&(p.style.fontWeight="bold")):r.modeClr&&(p.style.backgroundColor=r.modeClr):"s1"==r.mode?(p.style.color="inherit",p.style.fontWeight="inherit"):p.style.backgroundColor="transparent")}else a==-1?e.wgtSetProperty(t,"apxText",""):a>=0&&e.wgtSetProperty(t,"apxText","[[HTML]]"+o._convertLN(e,t,(i[a].text||"").replace(/\[\[/g,'<span style="font-family:inherit;color:'+r.colorFocus+';">').replace(/\]\]/g,"</span>")));a==-1?e.fireEvent("wgtEvent","[None]",t,!1,!0):a>=0&&e.fireEvent("wgtEvent",a+1+"",t,!1,!0)}}var n=e.wgtTag(t),r=e.wgtGetProperty(t,"cfg"),o=this;if(n.ctx&&n.ctx.idMedia){if("2a"==e.wgtGetProperty(t,"v")&&n.ctx._seeked&&n.ctx.curSub!=-1)if("Y"==r.v2aRS)i(-1),n.ctx._curTime=void 0,n.ctx.curSection=void 0;else if(n.ctx.curSection){var d=e.wgtGetMediaInfo(n.ctx.idMedia,"currentTime");d>=n.ctx.curSection.from&&d<n.ctx.curSection.to||(n.ctx._curTime=void 0,n.ctx.curSection=void 0)}if(void 0===n.ctx._curTime&&(n.ctx._curTime=0),(!e.wgtGetMediaInfo(n.ctx.idMedia,"pause")&&!e.wgtGetMediaInfo(n.ctx.idMedia,"seeking")||n.ctx._seeked)&&e.wgtGetMediaInfo(n.ctx.idMedia,"currentTime")){n.ctx._end=!1;var d=e.wgtGetMediaInfo(n.ctx.idMedia,"currentTime");(!n.ctx.curSection||d>=n.ctx.curSection.from&&d<n.ctx.curSection.to)&&(!bx.HCL.DV.isIOS()||d>n.ctx._curTime||d<n.ctx._curTime-.2)&&(i(this._findkSub(e,t,d)),n.ctx._curTime=d)}else e.wgtGetMediaInfo(n.ctx.idMedia,"end")&&!n.ctx._end?(n.ctx._end=!0,i(-1),n.ctx._curTime=0):n.ctx._refresh&&(n.ctx._refresh=!1,i(-1),n.ctx._curTime=0);n.ctx._seeked=!1}},xa.exeInputGet=function(e,t){if(t.ctx&&t.ctx.times)return bx.$cloneObject([],t.ctx.times)},xa.exeInputSet=function(e,t,a){if(t.ctx&&t.ctx.times&&a){t.ctx.times.length=0;for(var i=0;i<a.length;i++)t.ctx.times.push(a[i]);this._refresh(e,t.apnOID)}},xa._refresh=function(e,t){var a=e.wgtTag(t),i=e.wgtGetProperty(t,"subs"),n=e.wgtGetProperty(t,"cfg"),r=e.wgtGetProperty(t,"v");if(a.ctx._refresh=!0,r&&"2"==r[0]){n.mode&&(n.txt="");for(var o,d=0;d<a.ctx.times.length;d++)i[d]=i[d]||{track:1,pOes:a.ctx.times[d].pOes||"N"},i[d].text=a.ctx.times[d].text,i[d].txtPos=n.txt.length,n.mode&&(o=!1,d==a.ctx.times.length-1&&(o=!0),a.ctx.times[d].text.length&&"\n"==a.ctx.times[d].text[a.ctx.times[d].text.length-1]&&(o=!0),n.txt+=a.ctx.times[d].text+(o?"":" "));i.length=a.ctx.times.length,n.mode&&this._setupSpaned(e,t,n,i)}},xa._convertLN=function(e,t,a){var i=e.wgtGetProperty(t,"cfg"),n="";if(i&&"2"==i.yMrg)for(var r=0;r<a.length;r++)n+=0!=r&&"\n"==a[r-1]||"\n"!=a[r]?r>0&&"\n"==a[r-1]&&"\n"==a[r]?'<div style="cursor:inherit;line-height:1em;">&nbsp;</div>':a[r]:"<br/>";else if(i&&"1"==i.yMrg)for(var r=0;r<a.length;r++)n+="\n"==a[r]?"<br/>":a[r];else for(var r=0;r<a.length;r++)n+="\n"==a[r]&&"\n"!=a[r+1]?"<br/>":"\n"==a[r]&&"\n"==a[r+1]?'<div style="cursor:inherit;line-height:1em;">&nbsp;</div>':a[r];return n},xa._findkSub=function(e,t,a){var i=e.wgtTag(t);e.wgtGetProperty(t,"subs");if(i.ctx&&i.ctx.idMedia&&e.wgtGetMediaInfo(i.ctx.idMedia,"end"))return-1;for(var n=0;n<i.ctx.times.length;n++)if(i.ctx.curTrack==(i.ctx.times[n].track||1)&&i.ctx.times[n].stime<=parseFloat(a)&&parseFloat(a)<i.ctx.times[n].etime)return n;if("2a"==e.wgtGetProperty(t,"v"))for(var n=0;n<i.ctx.times.length;n++)if(i.ctx.curTrack==(i.ctx.times[n].track||1)&&i.ctx.times[n].stime<=parseFloat(a)&&parseFloat(a)<i.ctx.times[n].etime+.1)return n;return-1},xa._buildTextPlain=function(e,t){for(var a,i="",n=e.wgtGetProperty(t,"subs"),r=0;r<n.length;r++)a=!1,r==n.length-1&&(a=!0),n[r].text.length&&"\n"==n[r].text[n[r].text.length-1]&&(a=!0),i+=n[r].text+(a?"":" ");return i},xa._buildText=function(e,t){function a(e,t){var a;if(a=apn.IWidget.exeFormatText(e),t){for(var i="",n=0;n<a.length;n++)i+=" "==a[n]&&" "==a[n+1]?"&nbsp;":a[n];a=i}return a}for(var i,n="",r=e.wgtGetProperty(t,"subs"),o="justify"==e.wgtGetProperty(t,"apxTextAlign"),d=0;d<r.length;d++)i=!1,d==r.length-1&&(i=!0),r[d].text.length&&"\n"==r[d].text[r[d].text.length-1]&&(i=!0),n+=e.wgtGetProperty(t,"vJ")?'<span id="'+d+'C" style="cursor:inherit;font-family:inherit;border-radius:3px;"><span id="'+d+'S" style="cursor:inherit;font-family:inherit;border-radius:3px;">'+a(r[d].text||"",o)+"</span></span>"+(i?"":" "):'<span id="'+d+'C" style="cursor:inherit;font-family:inherit;border-radius:3px;"><span id="'+d+'S" style="cursor:inherit;font-family:inherit;border-radius:3px;">'+(r[d].text||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></span>"+(i?"":" ");
return this._convertLN(e,t,n)},xa._timeToSec=function(e){var t=(e||"").split(":"),a=60*bx.$checkNaN(parseInt(t[0]))+bx.$checkNaN(parseInt(t[1]))+bx.$checkNaN(parseInt(t[2]))/100;return a=Math.round(1e3*a)/1e3},xa._closest=function(e,t,a){for(var i,n=[],r=null,o=0;o<a.length;o++)i=e.wgtIntersectWith(void 0,t,1,a[o]),i&&i.length&&n.push(i[0]);return n.length>1?a=n:1==n.length&&(r=n[0]),r||(r=e.utlFindClosest(t,a)),r},xa._hhmmss999TOmmss99=function(e){function t(e){return 2==e.length?e:e.length>2?e.substring(0,2):e+"0"}var a=e.split(/[:.]/g);return 4==a.length?60*bx.$checkNaN(parseInt(a[0]))+bx.$checkNaN(parseInt(a[1]))+":"+a[2]+":"+t(a[3]):3==a.length?a[0]+":"+a[1]+":"+t(a[2]):""},xa._vttParse=function(e,t,a){function i(e){var t=e.replace(/\s+$/g,"");return t}if(!e||!e.split)return!1;for(var n,r=e.split("\n"),o=0,d=-1,s=0;s<r.length;s++)if(r[s]=i(r[s]),r[s].indexOf(":")>0&&r[s].indexOf("-->")>0){var p=r[s].split(" ");p.length>2&&"-->"==p[1]&&this._hhmmss999TOmmss99(p[0])&&this._hhmmss999TOmmss99(p[2])?(d++,t&&(t[d]={text:""},t[d].stime=this._hhmmss999TOmmss99(p[0]),t[d].etime=this._hhmmss999TOmmss99(p[2])),o=1):(a&&void 0!==a.message&&(a.message+="VTT parsing error in line "+(s+1)+".\n"),n=!0)}else 0==r[s].indexOf("NOTE")?o=2:r[s]&&1==o&&(parseInt(r[s])&&r[s+1]&&r[s+1].indexOf(":")>0&&r[s+1].indexOf("-->")>0||t&&(t[d].text+=(t[d].text?"\n":"")+r[s]));return d==-1&&(a&&void 0!==a.message&&(a.message+="This file is empty.\n"),n=!0),!n},xa.edtOnConfig=function(e,t,a,i,n){function r(){if(!n||!n.readOnly)if(eduLib.edtInputApplyAll(e,y.tagSub1),eduLib.edtInputApplyAll(e,y.tagSub2),eduLib.edtInputApplyAll(e,y.tagSub3),e.wgtSetProperty(t,"cfg",m),e.wgtSetProperty(t,"subs",v),"2a"==p);else{if(m.txt="",m.mode)for(var a,i=0;i<v.length;i++)a=!1,i==v.length-1&&(a=!0),v[i].text.length&&"\n"==v[i].text[v[i].text.length-1]&&(a=!0),v[i].txtPos=m.txt.length,m.txt+=v[i].text+(a?"":" ");e.wgtSetProperty(t,"apxText",m.txt)}}function o(){for(var e in f)this.id==e?(y[e].style.display="block",y.tagTab.$$(e).style.borderStyle="solid solid none solid"):(y[e].style.display="none",y.tagTab.$$(e).style.borderStyle="none none solid none");eduWgtSubtitle._uiLastSetupTab2A=this.id}function d(t,a){if(t){var i=[];if(h._vttParse(t,i,a))return v=i,eduLib.edtInputClear(e,y.tagSub1),eduLib.edtInputAdd(e,y.tagSub1,{type:"table",value:v,options:{th:[{title:"Start Time[?]",comment:"(MM:SS.99)"},{title:"End Time[?]",comment:"(MM:SS.99)"},"Subtitle"],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}]}),!0}return!1}function s(){"s1"==this.value?eduLib.edtInputShow(e,y.tagSub2,"mode_s1",!0):eduLib.edtInputShow(e,y.tagSub2,"mode_s1",!1),this.value&&"s"==this.value[0]?eduLib.edtInputShow(e,y.tagSub2,"mode",!0):eduLib.edtInputShow(e,y.tagSub2,"mode",!1)}var p;if(!(p=e.wgtGetProperty(t,"v")))return void this._edtOnConfigV1(e,t,a,i,n);var l=e.getScreenData(),u=[];for(var g in l.objects)l.objects[g].create&&l.objects[g].create.data&&l.objects[g].create.data.properties&&l.objects[g].create.data.properties.attrs&&l.objects[g].create.data.properties.attrs.apxMediaControl&&u.push({value:g,title:e.itrGetObjectTitle(g)});if(u.push({value:"",title:apn.CExe.GL(apn.CExe.TXT_SETUP_NOSEL)}),"2a"==p){var c,x=[];for(var g in l.objects)c=apn.Project.getStateByObjectID(e.getData(),e.getPageID(),g),c&&x.push({value:g,title:e.itrGetObjectTitle(g)+" with "+c.length+" state"+(c.length>1?"s":"")});x.push({value:"",title:apn.CExe.GL(apn.CExe.TXT_SETUP_NOSEL)})}var y,m=e.wgtGetProperty(t,"cfg"),v=e.wgtGetProperty(t,"subs"),f={tagSub1:!0,tagSub2:!0,tagSub3:!0},h=this,b={en:"※ For CJK(Chinese,Japanese,Korean), VTT file needs to be encoded in UTF-8. Also, VTT parser doesn't support CSS styling information.",ko:"※ 한국어, 중국어, 일본어(CJK)를 사용하는 경우, VTT 파일이 UTF-8으로 인코딩되어야 합니다. 그리고, 이 VTT 분석기는 VTT에 포함된 CSS 스타일을 인식하지 않습니다."},S={en:"※ To break the line, you can enter line-break from 'Subtitle' field.",ko:"※ 표시되는 문장의 줄을 바꾸기 위해서는, 'Subtile'에 항목에서 줄바꿈을 입력하면 됩니다."},I={en:"※ Also, you can sync with more widgets using 'Widget Event' from this widget.",ko:"※ 또한, 'Widget Event'를 통하여 다수의 Widget과 Sync할 수 있습니다."},w={en:"※ In case of 'Play touched section only', to start or resume the media, you need to clear the play section by Scripting.",ko:"※ '구간 Play' 방식을 사용하는 경우, 터치에 의하여 지정된 구간을 해제하고 처음부터 Play하기 위해서는 Script로 구간을 해제하고 Play해야 합니다."};if("2a"==p)var T=apn.CExe.GL({ko:"구간 정보",en:"Track data"}),L=apn.CExe.GL({ko:"연동할 미디어 위젯",en:"Media widget to sync with"});else var T=apn.CExe.GL({ko:"자막",en:"Subtitle"}),L=apn.CExe.GL({ko:"연동할 미디어 위젯",en:"Media widget to subtitle"});if(n&&n.readOnly&&(n.title=e.itrGetObjectTitle(t)),y=e.dlgDoModal(860,Math.floor(.9*bx.UX.height),r,void 0,n)){y.style.padding="12px",y.style.boxSizing="border-box";var P=apn.CExe.CSS_SETUP_PANE+"height:"+(y.clientHeight-40-24)+"px";y.tagTab=y.$TAG("div",{style:"position:relative;font-weight:bold;width:100%;height:26px;padding-bottom:14px;"}),y.tagTab.innerHTML='<span id="tagSub2" style="'+apn.CExe.CSS_SETUP_TAB+'">'+apn.CExe.GL({ko:"설정",en:"Setup"})+'</span><span id="tagSub1" style="'+apn.CExe.CSS_SETUP_TAB+'">'+T+'</span><span id="tagSub3" style="'+apn.CExe.CSS_SETUP_TAB+'">'+apn.CExe.GL({ko:"VTT파일에서 읽기",en:"Import from VTT"})+"</span>"+apn.CExe.CSS_SETUP_TAB_END,y.tagTab.$$("tagSub1").onclick=y.tagTab.$$("tagSub2").onclick=y.tagTab.$$("tagSub3").onclick=o,y.tagSub1=y.$TAG("div",{style:P}),y.tagSub2=y.$TAG("div",{style:P}),y.tagSub3=y.$TAG("div",{style:P}),n&&n.readOnly&&(eduLib.edtInputDisable(e,y.tagSub1),eduLib.edtInputDisable(e,y.tagSub2),eduLib.edtInputDisable(e,y.tagSub3),y.tagTab.$$("tagSub3").style.display="none",window.ResizeObserver&&new ResizeObserver(function(){y.tagTab.$$("tagBlank").style.width=y.clientWidth-24-(y.tagTab.$$("tagSub1").offsetLeft+y.tagTab.$$("tagSub1").offsetWidth)-1+"px"}).observe(y)),"2"==p?(eduLib.edtInputAdd(e,y.tagSub1,{type:"table",value:v,options:{th:[{title:apn.CExe.GL({ko:"시작 시간",en:"Start Time"})+"[?]",comment:"(MM:SS.99)"},{title:apn.CExe.GL({ko:"종료 시간",en:"End Time"})+"[?]",comment:"(MM:SS.99)"},apn.CExe.GL({ko:"자막 문구",en:"Subtitle"})],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}],join:!0}),eduLib.edtInputAdd(e,y.tagSub1,{type:"message",value:apn.CExe.GL(S),join:!0})):eduLib.edtInputAdd(e,y.tagSub1,{type:"table",value:v,options:{th:[{title:apn.CExe.GL({ko:"시작 시간",en:"Start Time"})+"[?]",comment:"(MM:SS.99)"},{title:apn.CExe.GL({ko:"종료 시간",en:"End Time"})+"[?]",comment:"(MM:SS.99)"},{title:apn.CExe.GL({ko:"구간 제목",en:"Title of Track"}),comment:apn.CExe.GL({ko:"(Event로 발생되거나 Layer 제목과 맵핑됨)",en:"(Use as Event title or mapped with Layer by title)"})},{title:apn.CExe.GL({ko:"이 구간에서 멈춤",en:"Pause on track[?]"}),comment:apn.CExe.GL({ko:"(이 구간이 시작될 때 미디어 멈춤)",en:"(Pause media on entering this track)"})}],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0},{type:"select",key:"pOes",options:[{title:"Yes",value:"Y"},{title:"No",value:"N"}],width:"120px"}],join:!0}),u.length&&(eduLib.edtInputAdd(e,y.tagSub2,{type:"select",options:u,title:L,key:"idMedia",value:m,join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"space"})),"2"==p?(eduLib.edtInputAdd(e,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"자막 표시",en:"Display text track"}),join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"select",title:apn.CExe.GL({ko:"표시 방식",en:"Display"}),key:"mode",value:m,options:[{title:apn.CExe.GL({ko:"일반 자막",en:"Each text track"}),value:""},{title:apn.CExe.GL({ko:"자막을 문단으로 합치고, 활성자막 배경색 강조",en:"Merge as a sentence and highlight track background"}),value:"s0"},{title:apn.CExe.GL({ko:"자막을 문단으로 합치고, 활성자막 텍스트 강조",en:"Merge as a sentence and highlight track text"}),value:"s1"}],onchange:s,join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"color",title:apn.CExe.GL({ko:"활성자막 색상",en:"Highlight color"}),key:"modeClr",value:m,askUse:!0,join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode_s1",type:"select",title:apn.CExe.GL({ko:"활성자막에 볼드체 표시",en:"Bold font"}),key:"modeBold",value:m,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:"N"}],join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"select",title:apn.CExe.GL({ko:"줄바꿈 표시 간격",en:"Line-break margin"}),key:"yMrg",value:m,options:[{title:apn.CExe.GL({ko:"기본 간격",en:"Normal"}),value:"1"},{title:apn.CExe.GL({ko:"좁게",en:"Narrower"}),value:"2"},{title:apn.CExe.GL({ko:"넓게",en:"Wider"}),value:""}],join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"space"}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"title",title:apn.CExe.GL({ko:"터치에 의한 구간 Play",en:"Section play by touch"}),join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"select",title:apn.CExe.GL({ko:"Play 방식",en:"Play by touch"}),key:"ptp",value:m,options:[{title:apn.CExe.GL({ko:"터치된 자막에서부터 Play",en:"Play from touched text"}),value:"S"},{title:apn.CExe.GL({ko:"터치된 자막만 구간 Play",en:"Play touched section only"}),value:"R"},{title:apn.CExe.GL({ko:"기능 사용 안함",en:"No"}),value:"N"}],join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"color",title:apn.CExe.GL({ko:"마우스 호버 색상",en:"Hover color"}),key:"ptpClr",value:m,askUse:!0,join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"select",title:apn.CExe.GL({ko:"마우스 호버에서 볼드체 표시",en:"Bold font on Hover"}),key:"ptpBold",value:m,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:"N"}],join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{id:"mode",type:"message",value:apn.CExe.GL(w),join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"space"}),eduLib.edtInputAdd(e,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"키워드 강조",en:"Keyword highlight"}),join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"color",title:apn.CExe.GL({ko:"강조 색상",en:"Highlight color"}),key:"colorFocus",value:m,join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"message",value:apn.CExe.GL({ko:"※ 텍스트에서 [[  ]]로 표시한 부분이 강조됩니다.",en:"※  Embrace with [[  ]] to highlight words"}),join:!0})):(eduLib.edtInputAdd(e,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"컨테이너 위젯과 자동으로 연동",en:"Automatically sync with"}),join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"select",options:x,title:apn.CExe.GL({ko:"연동할 위젯",en:"Layer/scene container"}),key:"idTarget",value:m,join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"message",value:apn.CExe.GL(I),join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"space"}),eduLib.edtInputAdd(e,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"추가 설정",en:"More options"}),join:!0}),eduLib.edtInputAdd(e,y.tagSub2,{type:"select",title:apn.CExe.GL({ko:"Seek이 실행되면 현재 구간 지정 해제",en:"Clear current track on seek"}),key:"v2aRS",value:m,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:""}],join:!0})),eduLib.edtInputAdd(e,y.tagSub3,{type:"file",accept:".vtt",title:apn.CExe.GL({ko:"VTT 파일",en:"VTT file"}),value:m,key:"vtt",oncheck:d,join:!0}),eduLib.edtInputAdd(e,y.tagSub3,{type:"message",value:apn.CExe.GL(b),join:!0}),void 0!==eduWgtSubtitle._uiLastSetupTab2A&&y.tagTab.$$(eduWgtSubtitle._uiLastSetupTab2A)?y.tagTab.$$(eduWgtSubtitle._uiLastSetupTab2A).onclick():y.tagTab.$$("tagSub2").onclick(),y.tagTab.$$("tagBlank").style.width=y.clientWidth-24-y.tagTab.$$("tagBlank").offsetLeft-1+"px"}},xa.edtOnRemapObjectID=function(e,t,a){if(t&&t.properties&&t.properties.attrs&&t.properties.attrs.cfg){var i=t.properties.attrs.cfg;i.idMedia&&(a[i.idMedia]?i.idMedia=a[i.idMedia]:e.getScreenData().objects[i.idMedia]||(i.idMedia="")),i.idTarget&&(a[i.idTarget]?i.idTarget=a[i.idTarget]:e.getScreenData().objects[i.idTarget]||(i.idTarget=""))}},xa.edtOnBuildEvent=function(e,t,a,i,n){var r=e.pages[a].objects[t].create.data.properties.attrs.v;if(r&&"2"==r[0]){var o=e.pages[a].objects[t].create.data.properties.attrs.subs;if(i.wgtEvent={value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},o.length)for(var d=0;d<o.length;d++)"2a"==r?o[d].text&&(i.wgtEvent.param[o[d].text]=o[d].text):i.wgtEvent.param[d+1]=d+1+"";var s=apn.Project.findITRs(e,a,t);if(s&&s.length){var p;for(d=0;d<s.length;d++)p=apn.P.resolveCompositeSysEV(s[d].event),!p||!p.param||"wgtEvent"!=p.ev||i.wgtEvent&&i.wgtEvent.param[p.param]||(i.wgtEvent=i.wgtEvent||{value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},i.wgtEvent.param[p.param]=p.param)}i.wgtEvent.param["[None]"]="[None]"}},xa.edtOnBuildState=function(e,t,a,i){var n=e.pages[a].objects[t].create.data.properties.attrs.v;if(n&&"2"==n[0]){i.r="Ready";var r=e.pages[a].objects[t].create.data.properties.attrs.subs;i.pNxt="Play Next",i.pPrv="Play Prev";for(var o=0;o<r.length;o++)"2a"==n?r[o].text&&(i["p_"+r[o].text]="Play "+r[o].text):i["p_"+(o+1)]="Play "+(o+1);for(i.sNxt="PlaySection Next",i.sPrv="PlaySection Prev",i.sC="ClearSection",o=0;o<r.length;o++)"2a"==n?r[o].text&&(i["s_"+r[o].text]="PlaySection "+r[o].text):i["s_"+(o+1)]="PlaySection "+(o+1)}},xa._edtOnConfigV1=function(e,t,a,i,n){function r(){n&&n.readOnly||(e.getObjectByID(t).data.styles.textMultiLine=!0,eduLib.edtInputApplyAll(e,o),e.wgtSetProperty(t,"cfg",d),e.wgtSetProperty(t,"subs",s))}var o,d=e.wgtGetProperty(t,"cfg"),s=e.wgtGetProperty(t,"subs");n&&n.readOnly&&(n.title=e.itrGetObjectTitle(t)),(o=e.dlgDoModal(800,600,r,void 0,n))&&(n&&n.readOnly&&eduLib.edtInputDisable(e,o),e.wgtGetProperty(t,"noMultiTrack")?eduLib.edtInputAdd(e,o,{type:"table",value:s,options:{th:[{title:"Start Time[?]",comment:"(MM:SS.99)"},{title:"End Time[?]",comment:"(MM:SS:99)"},"Subtitle"],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}]}):eduLib.edtInputAdd(e,o,{type:"table",value:s,options:{th:["Track#",{title:"Start Time[?]",comment:"(MM:SS.99)"},{title:"End Time[?]",comment:"(MM:SS:99)"},"Subtitle"],add:!0,remove:!0},td:[{type:"text",key:"track",width:"50px"},{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}]}),eduLib.edtInputAdd(e,o,{type:"space"}),eduLib.edtInputAdd(e,o,{type:"title",title:"More options"}),eduLib.edtInputAdd(e,o,{type:"color",title:"Highlight Color",key:"colorFocus",value:d,comment:"(Embrace with [[   ]] to highlight words)"}))},xa.pubOnGetText=function(e,t,a){var i,n=e.pages[t].objects[a].create.data;n.styles&&n.styles.font&&(i=n.styles.font),i=apn.Project.resolveStyle(e,"font",i);var r=n.properties.attrs,o="";if(!r.v||"2"==r.v)for(var d=0;d<r.subs.length;d++)o+=r.subs[d].text||"";return[{font:i,str:o}]},xa.pubOnGetFontList=function(e,t,a){var i=this.pubOnGetText(e,t,a);return i[0].font&&i[0].str?[i[0].font]:null},eduWgtSubtitle=xa;var xa=apn.inheritWidget(eduWgtSubtitle);xa.styleMap={title:!0},xa.APX_NO_POINTER_EV=!0,xa.exeItrNoResize=!0,xa.exeItrNoZoom=!0,xa.exeItrNoMove=!0,xa.apdConfigReadOnly=!0,xa.properties.attrs.v="2a",xa.properties.attrs.noMultiTrack=!0,xa.apnCImage={url:"DB/EDU/imgs/wgts/edit/mediaAnnt.png"},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n,void 0,apn.CEditorS.NO_RESIZE)},xa._setupSpaned=eduWgtSubtitle._setupSpaned,xa._refresh=eduWgtSubtitle._refresh,xa._convertLN=eduWgtSubtitle._convertLN,xa._findkSub=eduWgtSubtitle._findkSub,xa._buildTextPlain=eduWgtSubtitle._buildTextPlain,xa._buildText=eduWgtSubtitle._buildText,xa._timeToSec=eduWgtSubtitle._timeToSec,xa._closest=eduWgtSubtitle._closest,xa._hhmmss999TOmmss99=eduWgtSubtitle._hhmmss999TOmmss99,xa._vttParse=eduWgtSubtitle._vttParse,eduWgtMediaAntn=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.rect"]);xa.styleMap={title:!0,visibility:!0,alpha:!0},xa.editor=xa.editor||{},xa.editor.iconThumb="DB/ux/imgs/wgts/thumbs/dotIndicator.png",xa.properties=xa.properties||{},xa.properties.attrs={type:"Slide Widget",v:2,cfg:{imageOn:{mediaID:void 0},imageOff:{mediaID:void 0},margin:8,otb:"",xpg:[{i:""}]}},xa.onEdit=void 0,xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputApplyAll(e,l),e.wgtSetProperty(t,"cfg",n),e.wgtSetProperty(t,"type",u.type)}function i(){d&&eduLib.edtInputShow(e,l,"ver2","Slide Widget"==this.value),eduLib.edtInputShow(e,l,"v2page","F2"==this.value)}var n=e.wgtGetProperty(t,"cfg"),r=e.wgtGetProperty(t,"v");if(void 0!==n.idWgt){var o=e.getScreenData(),d=[];for(var s in o.objects)o.objects[s].create&&o.objects[s].create.data&&o.objects[s].create.data.properties&&o.objects[s].create.data.properties.attrs&&o.objects[s].create.data.properties.attrs.apxStep&&d.push({value:s,title:e.itrGetObjectTitle(s)});eduLib.utilSortObjectsByTitle(e,d),d.push({title:apn.CExe.GL(apn.CExe.TXT_SETUP_NOSEL),value:""})}var p=e.wgtGetProperty(t,"type");p=p||n.type;var l,u={type:p},g=apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:apn.CExe.GL({ko:"페이지",en:"Page"});if(l=e.dlgDoModal(640,Math.ceil(.8*bx.UX.height),a)){eduLib.edtSetTitleWidth(e,l,.52);var c;if(e.wgtGetProperty(t,"noPageMode")||(2==r?"apn.COverlayPage"==e.getScreenData().module?(eduLib.edtInputAdd(e,l,{type:"select",title:apn.CExe.GL({ko:"연동 대상 모듈",en:"Interact with"})+" (m)",options:[{title:g+" "+apn.CExe.GL({ko:"관리자",en:"manager of this file"}),value:"F2"},{title:apn.CExe.GL({ko:"스텝 연동 위젯",en:"Step interface widget in this "+g}),value:"Slide Widget"}],key:"type",value:u,onchange:i,join:!0}),c=!0):n.type="Slide Widget":eduLib.edtInputAdd(e,l,{type:"select",title:apn.CExe.GL({ko:"연동 대상 모듈",en:"Interact with"})+" (m)",options:[{title:g+" "+apn.CExe.GL({ko:"관리자",en:"manager of this file"}),value:"File"},{title:"'Slide Area' "+apn.CExe.GL({ko:"위젯",en:"widget in this "+g}),value:"Slide Widget"}],key:"type",value:u,onchange:i,join:!0}),d&&d.length&&eduLib.edtInputAdd(e,l,{id:"ver2",type:"select",options:d,title:apn.CExe.GL({ko:"연동 스텝 위젯",en:"Step widget to interface width"})+" (m)",key:"idWgt",value:n,join:!0}),eduLib.edtInputAdd(e,l,{type:"select",title:apn.CExe.GL({ko:"점을 클릭하면 연결 대상으로 전환",en:"Switch to the connected target on tap of a dot"}),value:n,key:"otb",options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:""}],join:!0}),eduLib.edtInputAdd(e,l,{type:"space"})),eduLib.edtInputAdd(e,l,{type:"title",title:apn.CExe.GL({ko:"점 이미지",en:"Images for dot"})}),eduLib.edtInputAdd(e,l,{type:"image",title:apn.CExe.GL({ko:"선택",en:"On"})+" (m)",key:"imageOn",value:n,join:!0}),eduLib.edtInputAdd(e,l,{type:"image",title:apn.CExe.GL({ko:"미선택",en:"Off"})+" (m)",key:"imageOff",value:n,join:!0}),eduLib.edtInputAdd(e,l,{type:"space"}),eduLib.edtInputAdd(e,l,{type:"title",title:apn.CExe.GL(apn.CExe.TXT_SETUP_OPTS)}),eduLib.edtInputAdd(e,l,{type:"number",title:apn.CExe.GL({ko:"점간 여백",en:"Margin between dots"})+"[px]",key:"margin",value:n,join:!0}),c){eduLib.edtInputAdd(e,l,{id:"v2page",type:"space"}),eduLib.edtInputAdd(e,l,{id:"v2page",type:"title",title:apn.CExe.GL({ko:"제외할",en:"Excluded"})+" "+g});var x=apn.CExeBook.IStub_pageSelectionList(e.getData());x.push({title:apn.CExe.GL(apn.CExe.TXT_SETUP_NOSEL),value:""}),eduLib.edtInputAdd(e,l,{id:"v2page",type:"table",value:n.xpg,options:{th:[g],add:!0,remove:!0,noNumber:!0},td:[{type:"select",key:"i",options:x}],join:!0})}}},xa.edtOnRemapObjectID=function(e,t,a){if(t&&t.properties&&t.properties.attrs&&t.properties.attrs.cfg){var i=t.properties.attrs.cfg;i.idWgt&&(a[i.idWgt]?i.idWgt=a[i.idWgt]:e.getScreenData().objects[i.idWgt]||(i.idWgt=""))}},xa.edtOnCheckEdited=function(e,t){var a=(e.getObjectByID(t),e.wgtGetProperty(t,"cfg"));return!(!a.imageOn.mediaID||!a.imageOff.mediaID)},xa._imgW=function(e){return parseInt(e.style.width)?parseInt(e.style.width):e.width?e.width:e.naturalWidth?e.naturalWidth:0},xa._imgH=function(e){return parseInt(e.style.height)?parseInt(e.style.height):e.height?e.height:e.naturalHeight?e.naturalHeight:0},xa.setupDots=function(e,t,a,i){function n(){s++,2==s&&(r(),i&&i())}function r(){if(d.ctx.tagDotOn=p,d.ctx.tagDotOffs=[],d.ctx.tagDotOffs.push(l),d.ctx.marginX=bx.$checkNaN(parseInt(o.margin)),d.ctx.count=a,d.ctx.cur=-1,1!=e.getZoomX()||1!=e.getZoomY()){var i=u._imgW(d.ctx.tagDotOffs[0]),n=u._imgH(d.ctx.tagDotOffs[0]),r=u._imgW(d.ctx.tagDotOn),s=u._imgH(d.ctx.tagDotOn);d.ctx.tagDotOffs[0].style.width=Math.round(1/e.getZoomX()*i)+"px",d.ctx.tagDotOffs[0].style.height=Math.round(1/e.getZoomY()*n)+"px",d.ctx.tagDotOn.style.width=Math.round(1/e.getZoomX()*r)+"px",d.ctx.tagDotOn.style.height=Math.round(1/e.getZoomY()*s)+"px"}var g=a-(d.ctx.tagDotOffs.length+1);if(g>0)for(var c=0;c<g;c++){var x=d.ctx.tagDotOffs[0].cloneNode(!0);d.ctx.tagDotOffs[0].parentNode.appendChild(x),d.ctx.tagDotOffs.push(x)}if("Y"==o.otb)for(var c=0;c<d.ctx.tagDotOffs.length;c++)d.ctx.tagDotOffs[c].style.cursor="pointer",d.ctx.tagDotOffs[c].apxOnEvent=function(e,a){if("click"==a){var i=e.wgtGetProperty(t,"type");return"F2"==i&&d.ctx.pages&&d.ctx.pages[this._dotIdx]?e.runITR({action:"LTP",to:{pageID:d.ctx.pages[this._dotIdx],type:1}}):"Slide Widget"==i&&o.idWgt&&e.wgtTag(o.idWgt)&&e.wgtSetProperty(o.idWgt,"apxStepRun",this._dotIdx),!0}};d.ctx.ready=!0,void 0!==d.ctx._delayed&&(uxWgtDotIndicator.showDots(e,t,d.ctx._delayed.count,d.ctx._delayed.current),d.ctx._delayed=void 0)}var o=e.wgtGetProperty(t,"cfg"),d=e.wgtTag(t);if(!d.ctx||!d.ctx.setupCalled&&!d.ctx.ready){d.ctx.setupCalled=!0;var s=0,p=d.$TAG("img",{style:"position:absolute;",alt:""});p.onload=n,p.src=e.mediaURL(o.imageOn.mediaID);var l=d.$TAG("img",{style:"position:absolute;",alt:""});l.onload=n,l.src=e.mediaURL(o.imageOff.mediaID),d.style.display="none";var u=this}},xa.showDots=function(e,t,a,n){var r=e.wgtTag(t);if(r&&r.ctx&&(r.ctx.cur=n,r.ctx.countUpdated=a,r.ctx.ready)){r.style.display="block";var o=this._imgW(r.ctx.tagDotOffs[0])*(a-1)+this._imgW(r.ctx.tagDotOn)+r.ctx.marginX*(a-1),d=Math.max(this._imgH(r.ctx.tagDotOffs[0]),this._imgH(r.ctx.tagDotOn)),s=(parseInt(r.style.width)-o)/2,p=(parseInt(r.style.height)-d)/2,l=0,u=s,g=p+d/2;for(r.ctx.tagDotOn.style.display="none",i=0;i<r.ctx.tagDotOffs.length;i++)r.ctx.tagDotOffs[i].style.display="none";if(!(n<0||1==a))for(i=0;i<a;i++)i==n?(r.ctx.tagDotOn.style.display="block",r.ctx.tagDotOn.style.left=u+"px",r.ctx.tagDotOn.style.top=g-this._imgH(r.ctx.tagDotOn)/2+"px",u+=this._imgW(r.ctx.tagDotOn)+r.ctx.marginX):(r.ctx.tagDotOffs[l].style.display="block",r.ctx.tagDotOffs[l].style.left=u+"px",r.ctx.tagDotOffs[l].style.top=g-this._imgH(r.ctx.tagDotOffs[l])/2+"px",r.ctx.tagDotOffs[l]._dotIdx=i,u+=this._imgW(r.ctx.tagDotOffs[l])+r.ctx.marginX,l++)}},xa.exeOnLoad=function(e,t){function a(){uxWgtDotIndicator.showDots(e,t,p.count,p.index)}function a(){e.viewer.getCurPageID()&&uxWgtDotIndicator.exeOnPageRun(e,t,e.viewer.getCurPageID())}function i(){uxWgtDotIndicator._onTrackOn(e,t,s.ctx.count,s.ctx.cur==-1?0:s.ctx.cur)}function n(a,n,r){switch(a){case"listSet":uxWgtDotIndicator.setupDots(e,t,n,i);break;case"trackEnd":uxWgtDotIndicator._onTrackOn(e,t,n,r)}}function r(a,i){a==m&&uxWgtDotIndicator._onStep(e,t,i)}var o=e.wgtGetProperty(t,"type"),d=e.wgtGetProperty(t,"cfg"),s=e.wgtTag(t);if(d.imageOn.mediaID&&d.imageOff.mediaID)if(s.firstChild&&"DIV"==s.firstChild.tagName&&(s.firstChild.style.display="none"),s.ctx={},"File"==o){var p=e.utlGetIndexInFlow(t,{key:"type",value:"File"},!0);if(p.count<=1)return void e.log(t,"Only 1 slide includes this widget. So, this widget will be disabled.");uxWgtDotIndicator.setupDots(e,t,p.count,a),e.wgtSetProperty(t,"apxFixOverPage",!0)}else if("F2"==o){var l=apn.Project.getPages(e.viewer.project,!0);if(d.xpg&&d.xpg.length)for(var u,g=0;g<d.xpg.length;g++)for(u=0;u<l.length;u++)l[u]==d.xpg[g].i&&(l.splice(u,1),u--);if(l.length<=1)return void e.log(t,"Only 1 page is included in the flow of this file. This widget will be disabled.");s.ctx.pages=l,uxWgtDotIndicator.setupDots(e,t,l.length,a)}else if("Video/Audio"==o||"Video/Audio Widget"==o){var c=e.getWidgetsByProperty("apxMediaControl"),x=e.getWidgetsByProperty("apxMediaControl");if(!c.length)return void e.log(t,"Cannot find any kind of Media Widget in this page. So, this widget will be disabled.");for(var y=apn.Project.findParentOf(e.screen,t,void 0,!0),g=0;g<x.length;g++)y&&y!=apn.Project.findParentOf(e.screen,x[g],void 0,!0)&&(x.splice(g,1),g--);var m;(m=uxWgtDotIndicator._closest(e,t,x)||uxWgtDotIndicator._closest(e,t,c))&&e.wgtListenMedia(t,m,n)}else if("Slide"==o||"Slide Widget"==o){var m;if(d.idWgt)m=d.idWgt;else{var v=e.getWidgetsByProperty("apxStep"),f=e.getWidgetsByProperty("apxStep");if(!v.length)return void e.log(t,"Cannot find any kind of Step Widget in this page. So, this widget will be disabled.");for(var y=apn.Project.findParentOf(e.screen,t,void 0,!0),g=0;g<f.length;g++)y&&y!=apn.Project.findParentOf(e.screen,f[g],void 0,!0)&&(f.splice(g,1),g--);m=uxWgtDotIndicator._closest(e,t,f)||uxWgtDotIndicator._closest(e,t,v)}m&&e.wgtListenProperty(t,"apxStep",r)}},xa.exeOnPageRun=function(e,t,a){var i=e.wgtTag(t);if(i.ctx&&i.ctx.pages&&i.ctx.pages.length>1){for(var n=0;n<i.ctx.pages.length;n++)if(i.ctx.pages[n]==a)return void this.showDots(e,t,i.ctx.pages.length,n);"none"==i.style.display&&this.showDots(e,t,i.ctx.pages.length,0)}},xa._closest=function(e,t,a){for(var i,n=[],r=null,o=0;o<a.length;o++)i=e.wgtIntersectWith(void 0,t,1,a[o]),i&&i.length&&n.push(i[0]);return n.length>1?a=n:1==n.length&&(r=n[0]),r||(r=e.utlFindClosest(t,a)),r},xa._onTrackOn=function(e,t,a,i){var n=e.wgtTag(t);return a<=1?void uxWgtDotIndicator.showDots(e,t,1,-1):(i==a&&(i=0),i>a||a>n.ctx.tagDotOffs.length+1?(uxWgtDotIndicator.showDots(e,t,1,-1),void e.devError(t,"Invalid track information; trackCount="+a+", trackCur="+i)):void uxWgtDotIndicator.showDots(e,t,a,i))},xa._onStep=function(e,t,a){function i(){void 0!==n.ctx._delayed?(uxWgtDotIndicator.showDots(e,t,n.ctx._delayed.count,n.ctx._delayed.current),n.ctx._delayed=void 0):uxWgtDotIndicator.showDots(e,t,n.ctx.countUpdated||n.ctx.count,n.ctx.cur==-1?0:n.ctx.cur)}var n=e.wgtTag(t);return a.count&&!(a.count<=1)&&a.current<a.count?void(n.ctx.setupCalled?n.ctx.ready?uxWgtDotIndicator.showDots(e,t,a.count,a.current):n.ctx._delayed=a:uxWgtDotIndicator.setupDots(e,t,a.count,i)):(uxWgtDotIndicator.showDots(e,t,1,-1),void e.devError(t,"Invalid step information; stepCount="+a.count+", stepCur="+a.current))},uxWgtDotIndicator=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.image2"]);xa.exeFireStateEvent=!0,xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,textMultiLine:!0,fontUnderlined:!0,text:!0,textAlign:!0,textValign:!0,textPadding:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,borderRadiusTopLeft:!0,borderRadiusTopRight:!0,borderRadiusBottomLeft:!0,borderRadiusBottomRight:!0,alpha:!0,angle:!0,mediaID:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.editor={},xa.editor.iconThumb="DB/ux/imgs/wgts/thumbs/imageButton.png",xa._txtSpt1={ko:"기본 상태 이미지 ID",en:"Image asset ID for normal state"},xa._txtSpt2={ko:"선택 상태 이미지 ID",en:"Image asset ID for selected state"},xa.scriptInfo={wgtDataByParam:"selectType",wgtData:{"":{image:{help:"{normal:ID|undefined, pressed:ID|undefined, hover:ID|undefined}\n"+apn.CExe.GL(xa._txtSpt1),type:"so",value:{}},imageDisabled:{help:"{normal:ID|undefined}\n"+apn.CExe.GL({ko:"비활성 상태 이미지 ID",en:"Image asset ID for disabled state"}),type:"so",value:{}}},tab:{image:{help:"{normal:ID|undefined, hover:ID|undefined}\n"+apn.CExe.GL(xa._txtSpt1),type:"so",value:{}},imageSelected:{help:"{normal:ID|undefined}\n"+apn.CExe.GL(xa._txtSpt2),type:"so",value:{}}},check:{image:{help:"{normal:ID|undefined, hover:ID|undefined}\n"+apn.CExe.GL({ko:"미선택 상태 이미지 ID",en:"Image asset ID for unchecked state"}),type:"so",value:{}},imageChecked:{help:"{normal:ID|undefined, hover:ID|undefined}\n"+apn.CExe.GL(xa._txtSpt2).replace("selected","checked"),type:"so",value:{}}}}},xa.properties.state="normal",xa.properties.attrs=xa.properties.attrs||{},xa.properties.attrs.selectType="",xa.properties.attrs.btnV=2,xa.properties.attrs.autoKeepSize=!1,xa.properties.attrs.cfg={images:{normal:{mediaID:void 0},down:{mediaID:void 0},hover:{mediaID:void 0},disabled:{mediaID:void 0},disabledDown:{mediaID:void 0},disabledHover:{mediaID:void 0},checked:{mediaID:void 0},checkedD:{mediaID:void 0},checkedH:{mediaID:void 0}},clr:{disabled:null,down:null,hover:null},ttip:"",hvrSync:""},xa.onEdit=apn.widgets["apn.wgt.rect"].onEdit,xa.exeCreateTag=function(e,t,a,i,n,r){var o=apn.widgets["apn.wgt.rect"].exeCreateTag.call(this,e,t,a,i,n,r);return o.apnTapCsr=!0,o},xa.exeAssetPreload=function(e,t,a){function i(e,t,i){a()}var n=e.wgtGetProperty(t,"cfg"),r={},o=0;for(var d in n.images)n.images[d].mediaID&&(r[d]={url:e.mediaURL(n.images[d].mediaID)},o++);o?(new apn.CRscLoader).load(e.project,r,i):a()},xa.exeOnLoad=function(e,t){function a(){if(e.wgtTag(t)){var a="hover";if("toggle"==h)"disabled"==e.wgtGetProperty(t,"apxState")&&(a="disabledHover");else if("check"==h)"checked"==e.wgtGetProperty(t,"apxState")&&(a="checkedH");else if("disabled"==e.wgtGetProperty(t,"apxState"))return;v._images[a].mediaID&&m.exeAssetLoad(e,v,v._images[a].mediaID),uxWgtBtnImage.setTextColor(e,t,a),m.I_exeOnStateChange&&m.I_exeOnStateChange(e,t,a)}}function i(){if(e.wgtTag(t)){if(v._down)if("check"==h)var a="checkedD";else var a="down";else var a=e.wgtGetProperty(t,"apxState");v._images[a].mediaID&&m.exeAssetLoad(e,v,v._images[a].mediaID),uxWgtBtnImage.setTextColor(e,t,a),m.I_exeOnStateChange&&m.I_exeOnStateChange(e,t,a)}}function n(){if(e.wgtTag(t)){var a="down";if("toggle"==h)"disabled"==e.wgtGetProperty(t,"apxState")&&(a="disabledDown");else if("check"==h);else if("disabled"==e.wgtGetProperty(t,"apxState"))return;v._images[a].mediaID&&m.exeAssetLoad(e,v,v._images[a].mediaID),uxWgtBtnImage.setTextColor(e,t,a),m.I_exeOnStateChange&&m.I_exeOnStateChange(e,t,a)}}function r(){var a=e.wgtGetProperty(t,"apxState");v._images[a]||(a="normal"),v._images[a].mediaID&&m.exeAssetLoad(e,v,v._images[a].mediaID),uxWgtBtnImage.setTextColor(e,t,a),m.I_exeOnStateChange&&m.I_exeOnStateChange(e,t,a)}function o(a){a?v.btnOnDown&&v.btnOnDown(v):v._down&&(v._down=!1,v.btnOnState&&v.btnOnState(v),f.hvrSync&&e.ctxSet("uxWgtBtnImage_"+f.hvrSync,{oId:t,state:3}))}function d(e,t){e.apnBlockPointerEvent||(t==bx.CGesture.POINTER_START?o(!0):t==bx.CGesture.POINTER_END&&o(!1))}function s(e){e&&e.oId!=t&&(x&&0==e.state?i():x&&1==e.state?a():y&&2==e.state?n():3==e.state&&r())}function p(a){a&&e.log(t,"Image can be set only to replace existing image. Currently, '"+a+"' image is unset for this widget.")}function l(e,a){if(e==t&&a){var i,n;a.normal&&(v._images.normal.mediaID?(v._images.normal.mediaID=a.normal,n=!0):i="Normal"),a.pressed&&(v._images.down.mediaID?(v._images.down.mediaID=a.pressed,n=!0):i="Pressed"),a.hover&&(v._images.hover.mediaID?(v._images.hover.mediaID=a.hover,n=!0):i="Hover"),n&&v.btnOnState&&v.btnOnState(v),p(i)}}function u(e,a){if(e==t&&a){var i,n;a.normal&&(v._images.disabled.mediaID?(v._images.disabled.mediaID=a.normal,n=!0):i="Disabled"),n&&v.btnOnState&&v.btnOnState(v),p(i)}}function g(e,a){if(e==t&&a){var i,n;a.normal&&(v._images.checked.mediaID?(v._images.checked.mediaID=a.normal,n=!0):i="Checked"),a.hover&&(v._images.checkedH.mediaID?(v._images.checkedH.mediaID=a.hover,n=!0):i="Checked.hover"),n&&v.btnOnState&&v.btnOnState(v),p(i)}}function c(e,a){if(e==t&&a){var i,n;a.normal&&(v._images.disabled.mediaID?(v._images.disabled.mediaID=a.normal,n=!0):i="Selected"),n&&v.btnOnState&&v.btnOnState(v),p(i)}}var x,y,m=this,v=e.wgtTag(t),f=e.wgtGetProperty(t,"cfg"),h=e.wgtGetProperty(t,"selectType");f.ttip&&(v.title=f.ttip),f.images.disabledDown||(f.images.disabledDown={mediaID:void 0}),f.images.disabledHover||(f.images.disabledHover={mediaID:void 0}),f.clr||(f.clr={disabled:null,down:null,hover:null}),this.I_exeOnLoad_check&&!this.I_exeOnLoad_check(e,t)||(v._images=bx.$cloneObject({},f.images),v._down=!1,"tab"==h||"toggle"==h?("tab"==h&&(v._images.down=v._images.disabled,v._images.hover.mediaID||(v._images.hover=v._images.disabled)),
v.apxOnEvent=function(e,a,i,n){if("click"==a)return"toggle"==h?"normal"==e.wgtGetProperty(t,"apxState")?e.wgtSetProperty(t,"apxState","disabled"):e.wgtSetProperty(t,"apxState","normal"):"normal"==e.wgtGetProperty(t,"apxState")&&e.wgtSetProperty(t,"apxState","disabled"),!0}):"check"==h&&(v.apxOnEvent=function(e,a,i,n,r,r,o){if("click"==a)return"normal"==e.wgtGetProperty(t,"apxState")?e.wgtSetProperty(t,"apxState","checked"):e.wgtSetProperty(t,"apxState","normal"),!0}),(v._images.down.mediaID||f.clr&&f.clr.down||v._images.disabledDown.mediaID||f.clr&&f.clr.disabledDown)&&(y=!0,v.btnOnDown=function(a){if("toggle"==h);else if("check"==h);else if("disabled"==e.wgtGetProperty(t,"apxState"))return;v._down||(v._down=!0,n(),f.hvrSync&&e.ctxSet("uxWgtBtnImage_"+f.hvrSync,{oId:t,state:2}))}),v.btnOnState=function(e){r()},(v._images.hover.mediaID||f.clr&&f.clr.hover||v._images.disabledHover.mediaID||f.clr&&f.clr.disabledHover||f.clr&&f.clr.checkedH)&&(x=!0,bx.HCL.DV.hasTouchEvent()||(v.onmousemove=function(i){return!v.apnPassPointerEvent&&(!v.apnBlockPointerEvent&&void(v._down||(a(),f.hvrSync&&(v._btnHover||(v._btnHover=!0,e.ctxSet("uxWgtBtnImage_"+f.hvrSync,{oId:t,state:1}))))))},v.onmouseout=function(a){return!v.apnPassPointerEvent&&(!v.apnBlockPointerEvent&&(i(),void(f.hvrSync&&v._btnHover&&(v._btnHover=!1,v._down||e.ctxSet("uxWgtBtnImage_"+f.hvrSync,{oId:t,state:0})))))})),e.viewer.o.verGestureDispatch&&(v.apxOnGesture=function(e,t){d(this,t)}),new bx.CGesture(v,d,{noDelayedEvent:!0,noLongholdEvent:!0}),v.btnOnState&&v.btnOnState(v),f.hvrSync&&e.wgtListenContext(t,"uxWgtBtnImage_"+f.hvrSync,s,!0),e.wgtListenProperty(t,"image",l),e.wgtListenProperty(t,"imageDisabled",u),e.wgtListenProperty(t,"imageChecked",g),e.wgtListenProperty(t,"imageSelected",c),this.I_exeOnLoad_post&&this.I_exeOnLoad_post(e,t))},xa.exeSetState=function(e,t,a,i){function n(t){"on"==e.wgtGetProperty(t,"apxState")?e.wgtSetProperty(t,"apxState","off"):"disabled"==e.wgtGetProperty(t,"apxState")||"checked"==e.wgtGetProperty(t,"apxState")?e.wgtSetProperty(t,"apxState","normal"):"2"==e.stateGetActive(t,!0)&&(e.stateLayerActivate(t,"1"),e.stateSetActive(t,"1"))}if(i!=a){var r=e.wgtGetProperty(e.wgtId(t),"selectType");"toggle"==r||"check"==r||setTimeout(function(){"normal"==a?"Block"==e.wgtGetProperty(t.apnOID,"apxVisibility")||2==e.wgtGetProperty(t.apnOID,"apxVisibility")||(e.tagBlockPointerEvent(t,!1),apn.IWidget.exeSetCursor(t,e.wgtGetProperty(t.apnOID,"apxCursor",!0))):(e.tagBlockPointerEvent(t,!0),apn.IWidget.exeSetCursor(t,"inherit"))},0),t.btnOnState&&t.btnOnState(t);var o=e.wgtId(t);e.wgtGetProperty(o,"uxToggleGroup")&&("disabled"!=a&&"checked"!=a||e.utlIterateInGroup(o,"uxToggleGroup",n))}},xa.exeOnScreenRefresh=apn.widgets["apn.wgt.rect"].exeOnScreenRefresh,xa.setTextColor=function(e,t,a){var i,n=e.wgtTag(t),r=e.wgtGetProperty(t,"cfg"),o=e.wgtGetProperty(t,"btnV"),d=!!e.wgtGetProperty(t,"apxText");d&&(i=n.textTag?n.textTag:n),i&&r.clr&&("normal"==a?(n==i?i.style.color=apn.Project.resolveStyle(e.project,"fontStyle",e.wgtGetProperty(t,"apxTextColor")):i.style.color="inherit",2==o&&(n.style.borderColor=apn.Project.resolveStyle(e.project,"strokeStyle",e.wgtGetProperty(t,"apxStrokeStyle")))):r.clr[a]&&(i.style.color=r.clr[a],2==o&&(n.style.borderColor=r.clr[a])))},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputApplyAll(e,i.tagSub),eduLib.edtInputApplyAll(e,i.tagOrg),d.edtOnSetState(e,t,e.wgtGetProperty(t,"apxState")),e.wgtSetProperty(t,"cfg",n),r&&(e.wgtSetProperty(t,"local",r),d.I_edtOnConfig_save&&d.I_edtOnConfig_save(e,t,r,i,i.tagSub,i.tagOrg)),i._tmpSelectType&&e.wgtSetProperty(t,"selectType",i._tmpSelectType)}var i,n=e.wgtGetProperty(t,"cfg"),r=e.wgtGetProperty(t,"local"),o=e.wgtGetProperty(t,"selectType");n.images.disabledDown||(n.images.disabledDown={mediaID:void 0}),n.images.disabledHover||(n.images.disabledHover={mediaID:void 0}),n.clr||(n.clr={disabled:null,down:null,hover:null});var d=this;(i=e.dlgDoModal(700,Math.ceil(.8*bx.UX.height),a))&&(i.tagSub=i.$TAG("div"),i.tagOrg=i.$TAG("div"),this.I_edtOnConfig&&this.I_edtOnConfig(e,t,r,i,i.tagSub,i.tagOrg),uxWgtBtnImage.I_edtOnConfigBuild.call(this,e,t,i,i.tagOrg,o))},xa.I_edtOnConfigBuild=function(e,t,a,i,n){var r=e.wgtGetProperty(t,"cfg");a._tmpSelectType=n;var o=apn.CExe.GL({ko:"비활성 상태",en:"Disabled"}),d=apn.CExe.GL({ko:"기본 상태",en:"Normal"}),s=apn.CExe.GL({ko:"버튼 상태 표시를 위한 이미지",en:"Image for each states"}),p=d,l=o;if(2==e.wgtGetProperty(t,"btnV"))var u=apn.CExe.GL({ko:"버튼 상태 표시를 위한 텍스트/테두리 색상",en:"Text/border color for each states"});else var u=apn.CExe.GL({ko:"버튼 상태 표시를 위한 텍스트 색상",en:"Text color for each states"});this.I_edtOnConfig_title&&this.I_edtOnConfig_title(e,t,a,"normal")&&(p=this.I_edtOnConfig_title(e,t,a,"normal")),this.I_edtOnConfig_title&&this.I_edtOnConfig_title(e,t,a,"disabled")&&(l=this.I_edtOnConfig_title(e,t,a,"disabled")),i.eduLib&&delete i.eduLib,i.innerHTML="";var g="text"==e.wgtGetProperty(t,"btnType"),c=!!e.wgtGetProperty(t,"apxText");if("tab"==n)p==d&&(p=apn.CExe.GL({ko:"미선택 상태",en:"Unselected"})),l==o&&(l=apn.CExe.GL({ko:"선택 상태",en:"Selected"})),g||(eduLib.edtInputAdd(e,i,{type:"title",title:s}),eduLib.edtInputAdd(e,i,{type:"image",title:p+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+" Hover",value:r.images,key:"hover",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:l+"",value:r.images,key:"disabled",join:!0})),r.clr&&(c||g)&&(r.clr.down&&(r.clr.down=null),eduLib.edtInputAdd(e,i,{type:"space"}),eduLib.edtInputAdd(e,i,{type:"title",title:u}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:l,value:r.clr,key:"disabled",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:p+" Hover",value:r.clr,key:"hover",join:!0}));else if("toggle"==n)l==o&&(l="Selected"),g||(eduLib.edtInputAdd(e,i,{type:"title",title:s}),eduLib.edtInputAdd(e,i,{type:"image",title:l+"",value:r.images,key:"disabled",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:l+" Hover",value:r.images,key:"disabledHover",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:l+" Pressed",value:r.images,key:"disabledDown",join:!0}),eduLib.edtInputAdd(e,i,{type:"space",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+" Hover",value:r.images,key:"hover",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+" Pressed",value:r.images,key:"down",join:!0})),r.clr&&(c||g)&&(eduLib.edtInputAdd(e,i,{type:"space"}),eduLib.edtInputAdd(e,i,{type:"title",title:u}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:l,value:r.clr,key:"disabled",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:l+" Hover",value:r.clr,key:"disabledHover",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:l+" Pressed",value:r.clr,key:"disabledDown",join:!0}),eduLib.edtInputAdd(e,i,{type:"space",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:p+" Hover",value:r.clr,key:"hover",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:p+" Pressed",value:r.clr,key:"down",join:!0}));else if("check"==n){p=apn.CExe.GL({ko:"미선택 상태",en:"Unchecked"});var x=apn.CExe.GL({ko:"선택 상태",en:"Checked"});g||(eduLib.edtInputAdd(e,i,{type:"title",title:s}),eduLib.edtInputAdd(e,i,{type:"image",title:x+"",value:r.images,key:"checked",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:x+" Hover",value:r.images,key:"checkedH",join:!0}),eduLib.edtInputAdd(e,i,{type:"space",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+" Hover",value:r.images,key:"hover",join:!0})),r.clr&&(c||g)&&(eduLib.edtInputAdd(e,i,{type:"space"}),eduLib.edtInputAdd(e,i,{type:"title",title:u}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:x,value:r.clr,key:"checked",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:x+" Hover",value:r.clr,key:"checkedH",join:!0}),eduLib.edtInputAdd(e,i,{type:"space",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:p+" Hover",value:r.clr,key:"hover",join:!0}))}else g||(eduLib.edtInputAdd(e,i,{type:"title",title:s}),eduLib.edtInputAdd(e,i,{type:"image",title:p+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+" Hover",value:r.images,key:"hover",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:p+" Pressed",value:r.images,key:"down",join:!0}),"simple"!=n&&(eduLib.edtInputAdd(e,i,{type:"space",join:!0}),eduLib.edtInputAdd(e,i,{type:"image",title:l,value:r.images,key:"disabled",join:!0}))),r.clr&&(c||g)&&(eduLib.edtInputAdd(e,i,{type:"space"}),eduLib.edtInputAdd(e,i,{type:"title",title:u}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:p+" Hover",value:r.clr,key:"hover",join:!0}),eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:p+" Pressed",value:r.clr,key:"down",join:!0}),"simple"!=n&&eduLib.edtInputAdd(e,i,{type:"color",askUse:!0,title:l,value:r.clr,key:"disabled",join:!0})),eduLib.edtInputAdd(e,i,{type:"space"}),eduLib.edtInputAdd(e,i,{type:"title",title:apn.CExe.GL({ko:"버튼간 Hover/Pressed 상태 동기화",en:"Synchronize Hover/Pressed status with buttons"})}),eduLib.edtInputAdd(e,i,{type:"text",title:apn.CExe.GL({ko:"그룹 지정",en:"Group"}),value:r,key:"hvrSync",comment:apn.CExe.GL({ko:"(편집자가 할당한 그룹ID)",en:"(Unique group ID assigned by user(editor))"}),join:!0});eduLib.edtInputAdd(e,i,{type:"space"}),eduLib.edtInputAdd(e,i,{type:"title",title:apn.CExe.GL({ko:"도움말(툴팁)",en:"Tooltip"})}),eduLib.edtInputAdd(e,i,{type:"text",title:apn.CExe.GL({ko:"메시지",en:"Message"}),value:r,key:"ttip",join:!0})},xa.edtOnSetState=function(e,t,a){var i=e.wgtGetProperty(t,"cfg");i.images[a].mediaID?e.wgtSetProperty(t,"apxMediaID",i.images[a].mediaID,e.wgtGetProperty(t,"autoKeepSize")):e.wgtSetProperty(t,"apxMediaID",null)},xa.edtOnBuildState=function(e,t,a,i){var n,r=e.pages[a].objects[t].create.data;r&&r.properties&&r.properties.attrs&&(n=r.properties.attrs.selectType),"tab"==n||"toggle"==n?(i.disabled="Selected",i.normal="Unselected"):"check"==n?(i.checked="Checked",i.normal="Unchecked"):(i.normal="Normal",i.disabled="Disabled")},xa.pubOnGetHTML=function(e,t,a,i){var n=apn.IWidget.htmlRender(this,e,t,a),r="<div";n.css+="overflow:hidden;",n.style.mediaID&&(n.css+="background-size:100% 100%;background-repeat:no-repeat;background-image: url("+apn.Project.mediaResolve(e,n.style.mediaID,!1,!0)+");");var o="",d=e.pages[t].objects[a].create.data.properties.attrs;return d.ttip&&(o+=' title="'+apn.IWidget.exeFormatText(d.ttip,{xml:!0,noTag:!0})+'"'),r+=' style="'+n.css+'"'+o,r+=' class="apxWgt1'+(i&&i.addCls?" "+i.addCls:"")+'"',r+=i&&i.noId?">":' data-apx-id="'+a+'">',r+="</div>"},uxWgtBtnImage=xa,window.bx=window.bx||{},bx.YT={_loaded:!1,_trying:!1,_playerIndex:0,_onLoads:[]},bx.YT.init=function(e){if(!bx.YT._loaded){if(bx.YT._trying)return void bx.YT._onLoads.push(e);window.onYouTubeIframeAPIReady=function(){if(bx.YT._trying=!1,bx.YT._loaded=!0,e&&e(),bx.YT._onLoads.length){for(var t=0;t<bx.YT._onLoads.length;t++)bx.YT._onLoads[t]();bx.YT._onLoads=[]}};var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),bx.YT._trying=!0}},bx.YT.isReady=function(){return bx.YT._loaded},bx.YT.CVideo=function(){this.player=null,this.tag=null,this.src=null,this._loaded=!1,this._playReqed=null,this._cueReqed=null,this._playing=null,this._pauseReqed=null,this._seekReqed=null},bx.YT.CVideo.prototype.create=function(e,t,a,i){function n(e){if(!d.__destroyed){d._loaded=!0,d._playReqed?(d.player.loadVideoById(d._playReqed),d.src=d._playReqed,d._cueReqed&&d._cueReqed==d._playReqed&&(d._cueReqed=null),d._playReqed=null):d._cueReqed&&(d.player.cueVideoById(d._cueReqed),d.src=d._cueReqed,d._cueReqed=null);var t;try{t=d.tag.contentWindow.document.getElementsByTagName("a")}catch(e){}if(t)for(var a,i=0;i<t.length;i++)(a=t[i].getAttribute("class"))&&a.indexOf("ytp-watermark")!=-1&&(t[i].style.display="none")}}function r(e){return d.__destroyed?void d.pause():void(e.data==-1?(s=!0,d._playing=null):e.data==YT.PlayerState.PLAYING?(s&&(d.onloadedmetadata&&d.onloadedmetadata(),s=!1),d.onplay&&d.onplay(),d._playing=d.src,d._pauseReqed?(d.pause(),d._pauseReqed=null):null!==d._seekReqed&&d.duration()&&("string"==typeof d._seekReqed&&(d._seekReqed=bx.$checkNaN(parseFloat(d._seekReqed))/100*d.duration()),d.player.seekTo(d._seekReqed),d._seekReqed=null)):e.data!=YT.PlayerState.ENDED&&e.data!=YT.PlayerState.PAUSED||(e.data==YT.PlayerState.ENDED&&(s=!0,d._playing=null,d.onended&&d.onended()),e.data==YT.PlayerState.PAUSED&&d.onpause&&d.onpause()))}function o(e){d.onerror&&d.onerror(e.data)}var d=this,s=!1,p="bxYT$"+bx.YT._playerIndex++,l=document.createElement("DIV");l.id=p,(e||document.body).appendChild(l),i=i||{},i.controls=i.controls||0,i.info=i.info||0,i.fullscreen=i.fullscreen||0,i.loop=i.loop||0,i.annotation=i.annotation||1,this.player=new YT.Player(p,{height:a,width:t,playerVars:{autohide:1,controls:i.controls,showinfo:i.info,modestbranding:1,disablekb:1,fs:i.fullscreen,loop:i.loop,iv_load_policy:i.annotation,rel:0},events:{onReady:n,onStateChange:r,onError:o}}),this.tag=document.getElementById(p)},bx.YT.CVideo.prototype.load=function(e){this._pauseReqed=null,this._seekReqed=null,this._loaded?(this.player.loadVideoById(e),this.src=e):this._cueReqed=e},bx.YT.CVideo.prototype.destroy=function(){this.player&&(this.pause(),this.__destroyed=!0)},bx.YT.CVideo.prototype.cue=function(e){this._pauseReqed=null,this._seekReqed=null,this._loaded?this.player.cueVideoById(e):this._cueReqed=e},bx.YT.CVideo.prototype.play=function(e,t,a){this._pauseReqed=null,this._seekReqed=null,e=e||this.src||this._cueReqed,e?this._loaded?t||e!=this.src?a?this.player.loadVideoById(e,a):this.player.loadVideoById(e):this.player.playVideo():this._playReqed=e:bx.Trace.log("BLUX","warning","Invalid YouTube ID="+e,"YT.play")},bx.YT.CVideo.prototype.pause=function(){this._loaded?(this.player.pauseVideo(),this._pauseReqed=null):this._pauseReqed=!0},bx.YT.CVideo.prototype.paused=function(e){return!(!this.player||!this.player.getPlayerState)&&(e?this.player.getPlayerState()==-1||0==this.player.getPlayerState()||2==this.player.getPlayerState()||5==this.player.getPlayerState():2==this.player.getPlayerState())},bx.YT.CVideo.prototype.seeking=function(){return!(!this.player||!this.player.getPlayerState||this.player.getPlayerState()!=YT.PlayerState.BUFFERING)},bx.YT.CVideo.prototype.duration=function(){if(this.player&&this.player.getDuration&&this._loaded){var e=this.player.getDuration();if(void 0!==e)return e}},bx.YT.CVideo.prototype.currentTime=function(){if(this.player&&this.player.getCurrentTime&&this._loaded){var e=this.player.getCurrentTime();if(void 0!==e)return e}},bx.YT.CVideo.prototype.setCurrentTimeDelayed=function(e){this._seekReqed=e},bx.YT.CVideo.prototype.setCurrentTime=function(e){return!!(this.player&&this.player.seekTo&&this._loaded)&&(this.player.getPlayerState()!=YT.PlayerState.PLAYING?this._seekReqed=e:this.player.seekTo(e),!0)},bx.YT.CVideo.prototype.mute=function(e){if(e){if(this.player&&this.player.mute)return this.player.mute(),!0}else if(this.player&&this.player.unMute)return this.player.unMute(),!0;return!1},bx.YT.CVideo.prototype.muted=function(){if(this.player&&this.player.isMuted)return this.player.isMuted()},bx.YT.CVideo.prototype.setVolume=function(e){return!(!this.player||!this.player.setVolume)&&(this.player.setVolume(100*e),!0)},bx.YT.CVideo.prototype.volume=function(){if(this.player&&this.player.getVolume){var e;if(e=this.player.getVolume(),void 0!==e)return e/100}};var xa={};xa.APX_NO_POINTER_EV=!0,xa.styleMap={title:!0,visibility:!0,alpha:!0,angle:!0},xa.scriptInfo={wgtData:{YouTubeURL:{help:{ko:"String\nYouTube 비디오 URL 또는 ID",en:"String\nURL or ID of YouTube video"},value:"String",type:"so"}}},xa.editor={iconThumb:"imgs/wgts/thumbs/video.png",properties:{Control:["Show","Hide"],"YouTube Info":{title:"Information",input:["Show","Hide"]},ytAnn:{title:"Annotation",input:["Show","Hide"]}},runtimeProperties:{YouTubeURL:{title:"YouTube URL",input:""}},states:{play:"Play",stop:"Stop",resume:"Resume",pause:"Pause"}},xa.properties={state:"stop",attrs:{apxMediaControl:2,Control:"Hide",Loop:"Off","YouTube Info":"Hide",ytAnn:"Hide",ids:[{id:""}],noMultiTrack:!0}},xa.CMedia={btnPlay:"DB/ux/imgs/wgts/youtube_play_btn.png",bgColor:"#000000",control:{Show:{btnPlay:!0,systemControl:!0},Hide:{btnPlay:!0}}},xa.exeCreateTag=apn.widgets["apn.wgt.rect"].exeCreateTag,xa.exeRenderTag=apn.widgets["apn.wgt.rect"].exeRenderTag,xa.createAsCanvasObject=apn.widgets["apn.wgt.audio"].createAsCanvasObject,xa.exeSetState=function(e,t,a,i,n){if(a){if(bx.HCL.DV.isAndroid())return null;"play"!=a||t.mediaTag||(t._delayedAutoPlay=!0),e.wgtControlMedia(e.wgtId(t),a)}},xa.exeOnLoad=function(e,t){function a(){e.wgtTag(t)&&(uxWgtYT._createPlayer(e,t),o._delayedAutoPlay&&(e.wgtControlMedia(t,"play"),delete o._delayedAutoPlay),o._tagBlock=o.$TAG("div",{style:"position:absolute;left:0px;top:0px;width:100%;height:100%;z-index:1;display:none;"}))}function i(a,i){a==t&&uxWgtYT.exeAssetLoad(e,o,[uxWgtYT._convert(i)])}function n(a){e.wgtTag(t)&&a&&a.oId!=t&&(o.mediaTag.paused()||s.exeMediaPause(o))}function r(a,i){a==t&&i&&(void 0!==i.from&&void 0!==i.to?o._apnPlaySectionStart=i.from:(o._apnPlaySectionStart=0,e.wgtSetProperty(t,"playSection",void 0,!0)))}var o=e.wgtTag(t);o.style.backgroundColor="#000000",bx.YT&&(bx.YT.isReady()?a():bx.YT.init(a)),e.wgtListenProperty(t,"YouTubeURL",i);var d,s=this;(d=e.wgtGetProperty(t,"mdaSync"))&&e.wgtListenContext(t,"apxMediaToggle_"+d,n,!0),e.wgtListenProperty(t,"playSection",r)},xa.exeOnScreenDrag=function(e,t,a){var i=e.wgtTag(t);a?i._tagBlock&&(i._tagBlock.style.display="block"):i._tagBlock&&(i._tagBlock.style.display="none")},xa.exeOnPause=function(e,t){e.wgtTag(t).mediaTag&&e.wgtTag(t).mediaTag.pause()},xa.exeOnDestroy=function(e,t){var a=e.wgtTag(t);a.mediaTag&&a.mediaTag.destroy()},xa.exeOnScreenVisibility=function(e,t,a){var i=e.wgtTag(t);if(i.mediaTag){var n=apn.Project.getLayout(e.project).property.CExe,r="P";if(n&&"P"==n.mediaOnHidden);else if(n&&"S"==n.mediaOnHidden)r="S";else{if(n&&"B"==n.mediaOnHidden)return;if(i.apxBackgroundOnSystemHidden)return;if(e.viewer.constructor.IStub_getConfiguration&&e.viewer.constructor.IStub_getConfiguration(e.project)&&e.viewer.constructor.IStub_getConfiguration(e.project).apxBackgroundOnSystemHidden)return}i.__apxLastScreenVisibility=a,"visible"==a?i.mediaTag.paused()&&i.__apxPausedByScreenVisibility&&(this.exeMediaPlay(i),i.__apxPausedByScreenVisibility=!1):"hidden"==a&&(i.mediaTag.paused()||("S"==r?this.exeMediaStop(i):(this.exeMediaPause(i),i.__apxPausedByScreenVisibility=!0)))}},xa.exeAssetLoad=function(e,t,a){t.mediaTag&&(t.mediaTag.apnPlayList=a,t.mediaTag.apnPlayList.apnCurrent=-1,t.mediaTag.apnPlayList.length&&(t.mediaTag.load(t.mediaTag.apnPlayList[0]),t.mediaTag.apnPlayList.apnCurrent=0,t.exeOnMediaEvent&&t.exeOnMediaEvent("listSet",t.mediaTag.apnPlayList.length)))},xa.exeOnTick=function(e,t){var a=e.wgtTag(t);if(a.mediaTag){var i,n,r;n=a.mediaTag.muted(),r=a.mediaTag.volume(),void 0!==n&&void 0!==r&&(void 0!==a.mediaTag.prvMute&&a.mediaTag.prvMute==n||(a.mediaTag.prvMute=n,i=!0),void 0!==a.mediaTag.prvVol&&a.mediaTag.prvVol==r||(a.mediaTag.prvVol=r,i=!0),i&&a.exeOnMediaEvent&&a.exeOnMediaEvent("volumeChange",r,n));var o,d,s;if(d=a.mediaTag.currentTime(),s=a.mediaTag.duration(),void 0!==d&&void 0!==s&&(void 0!==a.mediaTag.prvTimeCur&&a.mediaTag.prvTimeCur==d||(a.mediaTag.prvTimeCur=d,o=!0),void 0!==a.mediaTag.prvTimeDur&&a.mediaTag.prvTimeDur==s||(a.mediaTag.prvTimeDur=s,o=!0),o)){if(e.wgtGetProperty(a.apnOID,"playSection")&&!this.exeMediaInfo(a,"pause")){var p=e.wgtGetProperty(a.apnOID,"playSection"),l=this.exeMediaInfo(a,"currentTime");l<p.from-(bx.HCL.DV.isIOS()?.2:0)?this.exeMediaSeek(a,p.from,!0):l>=p.to&&(this.exeMediaSeek(a,p.from,!0),this.exeMediaPause(a))}a.exeOnMediaEvent&&a.exeOnMediaEvent("infoPlayTime",d,s)}}},xa.exeMediaPlay=function(e,t,a){if(e.mediaTag){var i=0;t&&void 0!==a&&a-1<e.mediaTag.apnPlayList.length&&(i=a-1);var n;t&&(e.mediaTag.apnPlayEnded=!1,e.mediaTag.apnPlayList.apnCurrent=i,e.mediaTag.load(e.mediaTag.apnPlayList[i]),e._apnPlaySectionStart&&(n=e._apnPlaySectionStart));try{e.mediaTag.play(void 0,t,n)}catch(e){console.error("Exception in play video",e)}}},xa.exeMediaPause=function(e){e._delayedAutoPlay=!1,e.mediaTag&&e.mediaTag.src&&e.mediaTag.pause()},xa.exeMediaStop=function(e,t){e._delayedAutoPlay=!1,e.mediaTag&&e.mediaTag.src&&(e.mediaTag.paused()?(t&&!e.mediaTag.apnPlayEnded&&t.fireEvent("media","End",e.apnOID),e.mediaTag.apnPlayEnded=!0):(e.mediaTag.apnPlayEnded=!0,e.mediaTag.pause()),e.mediaTag.apnPlayList.apnCurrent=0,e.mediaTag.cue(e.mediaTag.src))},xa.exeMediaSeek=function(e,t,a,i){if(e.mediaTag&&e.mediaTag.src){var n=0;if(e.mediaTag.duration()){n="string"==typeof t?bx.$checkNaN(parseFloat(t))/100*e.mediaTag.duration():t,n=Math.min(n,e.mediaTag.duration());var r,o;if(i&&(i instanceof Object?(r=i.rangeCheck,o=i.seekOnly):r=!0),r){if(void 0!==e.__lastSeeked&&Math.abs(e.__lastSeeked-n)<1)return;e.__lastSeeked=n}o?e.mediaTag.setCurrentTime(n):(a||this.exeMediaInfo(e,"pause")||e.mediaTag.pause(),a&&(this.exeMediaInfo(e,"pause")&&this.exeMediaPlay(e),e.mediaTag.setCurrentTime(n)))}else o||(a||this.exeMediaInfo(e,"pause")||e.mediaTag.pause(),a&&(this.exeMediaInfo(e,"pause")&&this.exeMediaPlay(e),e.mediaTag.setCurrentTimeDelayed(t)));e.mediaTag.apnOnSeek&&e.mediaTag.apnOnSeek(n),o&&(e.apnPlayEnded=!1,e.mediaTag.apnPlayEnded=!1)}},xa.exeMediaCheck=function(e){switch(e){case"mute":case"volume":case"pause":case"currentTime":case"end":case"seeking":return!0}return!1},xa.exeMediaControl=function(e,t,a){if(e.mediaTag){if("mute"==t)return e.mediaTag.mute(a);if("volume"==t)return e.mediaTag.setVolume(a)}return!1},xa.exeMediaInfo=function(e,t){if(e.mediaTag){if("mute"==t)return e.mediaTag.muted();if("volume"==t)return e.mediaTag.volume();if("pause"==t)return e.mediaTag.paused(!0);if("currentTime"==t)return e.mediaTag.currentTime()||0;if("seeking"==t)return e.mediaTag.seeking();if("end"==t)return e.mediaTag.apnPlayEnded}},xa.mediaHandler=function(e,t,a){e.mediaTag.onloadedmetadata=function(){e.exeOnMediaEvent&&(0==this.apnPlayList.apnCurrent&&e.exeOnMediaEvent("listStart"),this.duration()&&e.exeOnMediaEvent("infoDuration",0,this.duration()),e.exeOnMediaEvent("trackStart",this.apnPlayList&&this.apnPlayList.length>1?this.apnPlayList.length:1,this.apnPlayList.apnCurrent+1)),0==this.apnPlayList.apnCurrent&&t.fireEvent("media","Start",e.apnOID)},e.mediaTag.onplay=function(){e.mediaTag.apnPlayEnded=!1,e.mediaTag.currentTime()&&(t.fireEvent("media","Resume",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackResume",this.apnPlayList&&this.apnPlayList.length>1?this.apnPlayList.length:1,this.apnPlayList.apnCurrent+1));var a;(a=t.wgtGetProperty(e.apnOID,"mdaSync"))&&t.ctxSet("apxMediaToggle_"+a,{oId:e.apnOID})},e.mediaTag.onpause=function(){1==e.mediaTag.apnPlayEnded?(t.fireEvent("media","End",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackEnd")):(t.fireEvent("media","Pause",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackPause"))},e.mediaTag.onended=function(){var a=!1,i=this.apnPlayList&&this.apnPlayList.length>1?this.apnPlayList.apnCurrent+1:1;this.apnPlayList&&this.apnPlayList.length>1&&(this.apnPlayList.apnCurrent<this.apnPlayList.length-1&&(this.apnPlayList.apnCurrent++,a=!0),a&&this.play(this.apnPlayList[this.apnPlayList.apnCurrent])),a||(this.apnPlayEnded=!0,this.apnPlayList.apnCurrent=0,this.cue(this.apnPlayList[0]));var n=this.apnPlayList&&this.apnPlayList.length>1?this.apnPlayList.length:1;e.exeOnMediaEvent&&e.exeOnMediaEvent("trackEnd",n,i),n==i&&t.fireEvent("media","End",e.apnOID)},e.mediaTag.onerror=function(e){bx.Trace.log("APN","warning","Cannot play YouTube Video ID="+this.src+", YouTube Code="+e,"APN.YT")}},xa._createPlayer=function(e,t){var a=e.wgtTag(t),i={controls:"Show"==e.wgtGetProperty(t,"Control")?1:0,info:"Show"==e.wgtGetProperty(t,"YouTube Info")?1:0};e.viewer.isResizeSafe&&e.viewer.isResizeSafe()&&(i.fullscreen=1),"On"==e.wgtGetProperty(t,"Loop")&&(i.loop=1),"Hide"==e.wgtGetProperty(t,"ytAnn")&&(i.annotation=3),a.mediaTag=new bx.YT.CVideo,a.mediaTag.create(a,parseInt(a.style.width),parseInt(a.style.height),i),uxWgtYT.mediaHandler(a,e);for(var n=[],r=0;r<e.wgtGetProperty(t,"ids").length;r++)e.wgtGetProperty(t,"ids")[r].id&&n.push(e.wgtGetProperty(t,"ids")[r].id);uxWgtYT.exeAssetLoad(e,a,n)},xa._convert=function(e){if((e||"").indexOf("v=")!=-1){if(bx.$getParamFromURL(e,"v"))return bx.$getParamFromURL(e,"v")}else{var t=(e||"").split("/");if(t.length>0&&t[t.length-1])return t[t.length-1]}return e},xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputApplyAll(e,i);for(var a=0;a<n.length;a++)n[a].id=uxWgtYT._convert(n[a].id);e.wgtSetProperty(t,"ids",n),e.wgtSetProperty(t,"mdaSync",r.mdaSync)}var i,n=e.wgtGetProperty(t,"ids"),r={mdaSync:e.wgtGetProperty(t,"mdaSync")};(i=e.dlgDoModal(640,340,a))&&(e.wgtGetProperty(t,"noMultiTrack")?eduLib.edtInputAdd(e,i,{type:"table",value:n,options:{th:["YouTube URL/ID"]},td:[{type:"text",key:"id"}],join:!0}):eduLib.edtInputAdd(e,i,{type:"table",value:n,options:{th:["YouTube URL/ID"],add:!0,remove:!0},td:[{type:"text",key:"id"}],join:!0}),eduLib.edtInputAdd(e,i,{type:"space"}),apn.widgets["apn.wgt.video"]._edtOnConfigMdaSync(e,i,r))},xa.edtOnCheckEdited=function(e,t){var a=e.getObjectByID(t);if(a.data&&a.data.properties&&a.data.properties.attrs&&a.data.properties.attrs.ids)for(var i=0;i<a.data.properties.attrs.ids.length;i++)if(a.data.properties.attrs.ids[i]&&a.data.properties.attrs.ids[i].id)return!0;return!1},uxWgtYT=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.rect"]);xa.APX_NO_POINTER_EV=!0,xa.styleMap={title:!0,visibility:!0,alpha:!0,angle:!0},xa.editor={iconThumb:"DB/ux/imgs/wgts/thumbs/tag.png"},xa.properties={attrs:{URL:"http://",Scrollbar:"Auto",cfg:{pW:"",pWn:"width",pH:"",pHn:"height"}}},xa.scriptInfo={wgtData:{message:{help:"Send or receive data with IFRAME TAG. To receive, get this value on 'ReceiveMessage' Widget event."}}},xa.onEdit=void 0,xa.exeCreateTag=function(e,t,a,i,n){var r=!1;a.create.data.properties&&a.create.data.properties.attrs&&a.create.data.properties.attrs.Scrollbar&&"Auto"==a.create.data.properties.attrs.Scrollbar&&(r=!0);var o=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;"});return o.$CSS({boxSizing:"border-box"}),o.apnCur={},o._tagIFrame=o.$TAG("iframe",{scrolling:r?"auto":"no",style:"position:absolute;left:0px;top:0px;width:100%;height:100%;border:none;overflow:hidden;"}),o._tagBlock=o.$TAG("div",{style:"position:absolute;left:0px;top:0px;width:100%;height:100%;z-index:1;display:none;"}),o},xa._htmlSet=function(e,t,a){t._tagIFrame.sandbox="allow-same-origin allow-modals",t._tagIFrame.src="",t._dlydHtml=a},xa.exeOnLoad=function(e,t){function a(){if(l._dlydHtml){try{l._tagIFrame.contentWindow.document.documentElement.innerHTML=l._dlydHtml}catch(a){e.log(t,"'IFRAME tag handling'"+apn.CExe.MSG_SECURITY_1)}delete l._dlydHtml,u._syncHTML(e,l)}e.fireEvent("wgtEvent","load",t)}function i(e,a){e==t&&(l._tagIFrame.src=a||"")}function n(a,i){a==t&&u._htmlSet(e,l,i)}function r(a,i){a==t&&u._syncHTML(e,l)}function o(a,i){if(a==t)try{var n=l._tagIFrame.contentWindow||l._tagIFrame;bx.HCL.DV.isIE()&&n.focus(),n.print()}catch(a){e.log(t,"'IFRAME tag printing'"+apn.CExe.MSG_SECURITY_1)}}function d(a,i){if(a==t){var n="frame.html";i&&i.fileName&&(n=i.fileName),u._syncHTML(e,l),e.viewer.IDevice_saveAs(e.wgtGetProperty(t,"HTML"),n)}}function s(e,a){if(e==t)try{var i=l._tagIFrame.contentWindow||l._tagIFrame;i.document&&i.document.execCommand&&(a&&a.all&&i.document.execCommand("selectAll"),i.document.execCommand("copy"))}catch(e){}}function p(e,a){if(e==t){var i=l._tagIFrame.contentWindow||l._tagIFrame;i.postMessage({apxID:t,value:a},"*")}}var l=e.wgtTag(t),u=this;setTimeout(function(){var a=e.wgtGetProperty(t,"URL"),i=e.wgtGetProperty(t,"cfg");if("http://"!=a){if(i&&(i.pW&&i.pWn||i.pH&&i.pHn)){var n=!0;a.indexOf("?")==-1&&(a+="?",n=!1),i.pW&&i.pWn&&(a+=(n?"&":"")+i.pWn+"="+parseInt(l.style.width),n=!0),i.pH&&i.pHn&&(a+=(n?"&":"")+i.pHn+"="+parseInt(l.style.height))}l._tagIFrame.src=a}},0),l._tagIFrame.addEventListener("load",a,!1),e.wgtListenProperty(t,"URL",i),e.wgtListenProperty(t,"HTML",n),e.wgtListenProperty(t,"syncHTML",r),e.wgtListenProperty(t,"print",o),e.wgtListenProperty(t,"save",d),e.wgtListenProperty(t,"copy",s),e.wgtListenProperty(t,"message",p)},xa._syncHTML=function(e,t){try{t._tagIFrame.contentWindow.document&&t._tagIFrame.contentWindow.document.documentElement&&e.wgtSetProperty(t.apnOID,"HTML",t._tagIFrame.contentWindow.document.documentElement.outerHTML,!0)}catch(a){e.log(t.apnOID,"'IFRAME tag handling'"+apn.CExe.MSG_SECURITY_1)}},xa.exeOnScreenDrag=function(e,t,a){var i=e.wgtTag(t);a?i._tagBlock&&(i._tagBlock.style.display="block"):i._tagBlock&&(i._tagBlock.style.display="none")},xa.exeOnReceiveMessage=function(e,t,a){e.wgtSetProperty(t,"message",a,!0),e.fireEvent("wgtEvent","receiveMessage",t)},xa.edtOnBuildEvent=function(e,t,a,i){i.wgtEvent={value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},i.wgtEvent.param.load="Load",i.wgtEvent.param.receiveMessage="ReceiveMessage"},xa.edtOnBuildRuntimeProperty=function(e,t,a){return{URL:{title:"URL",input:"http://"}}},xa.edtOnBuildProperty=function(e,t,a,i){return{URL:{title:"URL",input:"http://"},Scrollbar:{title:"Scrollbar",input:["Auto","None"]}}},uxWgtIFRAME=xa;var xa={APX_NO_POINTER_EV:!0};xa.styleMap={title:!0},xa.exeItrNoResize=!0,xa.exeItrNoZoom=!0,xa.exeItrNoMove=!0,xa.editor={},xa.editor.states={on:"On",off:"Off"},xa.editor.properties={Interval:{title:"Interval[ms]",input:null,type:"number"},Offset:{title:"Offset[±ms]",input:null,type:"number"},noST:{title:"FireOnStart",input:[{title:"Yes",value:""},{title:"No",value:"Y"}]},apxBackgroundTick:{title:"Daemon",input:[{title:"On",value:"Y"},{title:"Off",value:""}]}},xa.apnCImage={url:"DB/ux/imgs/wgts/edit/timer_on.png"},xa.properties={},xa.properties.state="off",xa.properties.attrs={Interval:1e3,Offset:0,apxBackgroundTick:"",noST:""},xa.MIN=25,xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n,void 0,apn.CEditorS.NO_RESIZE)},xa.exeCreateTag=function(e,t,a,i,n,r){var o=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;"});return o.apnCur={},r&&t.wgtHide&&t.wgtHide(r),o},xa.exeRenderTag=function(e,t,a,i,n,r){return a},xa.exeOnLoad=function(e,t){var a=bx.$checkNaN(parseInt(e.wgtGetProperty(t,"Offset"))),i=bx.$checkNaN(parseInt(e.wgtGetProperty(t,"Interval")));i<uxWgtTimer.MIN&&(i=uxWgtTimer.MIN);var n=e.wgtTag(t);n._interval=i,n._offset=a},xa.exeOnStart=xa.exeOnResume=function(e,t){var a=e.wgtTag(t);a.__state="on"==e.wgtGetProperty(t,"apxState"),a._tm=0},xa.exeOnTick=function(e,t,a){var i=e.wgtTag(t);if(i.__state){if(0===i._tm&&"Y"==e.wgtGetProperty(t,"noST"))return void(i._tm=a+i._interval);(0===i._tm||i._tm<=a)&&(e.fireEvent("timer",void 0,t,"Y"==e.wgtGetProperty(t,"apxBackgroundTick")),i._tm=a+Math.max(uxWgtTimer.MIN,i._interval+Math.floor(i._offset*(Math.random()-.5)*2)))}},xa.exeSetState=function(e,t,a){t.__state="on"==a,t._tm=0},xa.edtOnSetState=function(e,t,a){var i=e.wgtGetProperty(t,"Interval");i=bx.$checkNaN(parseInt(i)),i<uxWgtTimer.MIN&&(i=uxWgtTimer.MIN,e.wgtSetProperty(t,"Interval",i)),e.wgtSetProperty(t,"URL","DB/ux/imgs/wgts/edit/timer_"+a+".png"),e.setMediaToObject(t,"DB/ux/imgs/wgts/edit/timer_"+a+".png")},xa.edtOnBuildEvent=function(e,t,a,i){i.timer={value:"timer",title:apn.P.eventTitle.timer}},uxWgtTimer=xa;var xa;xa=apn.inheritWidget(apn.widgets["apn.wgt.singleText"]),xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,
fontUnderlined:!0,text:!0,textPadding:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,alpha:!0,angle:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0},xa.editor=xa.editor||{},xa.editor.states={ready:"Ready",increase:"Increase",decrease:"Decrease"},xa.editor.statesFire={True:"True",False:"False"},xa.editor.properties={InitialValue:{title:apn.CExe.GL({ko:"시작값",en:"Initial Value"}),input:"",type:"number"},TargetValue:{title:apn.CExe.GL({ko:"목표값",en:"Trigger Value"}),input:"",type:"number"}},xa.properties=xa.properties||{},xa.properties.state="ready",xa.properties.attrs={InitialValue:0,TargetValue:1},xa.exeOnLoad=function(e,t){var a=e.wgtTag(t);a.ctx={},a.ctx.value=bx.$checkNaN(parseInt(e.wgtGetProperty(t,"InitialValue"))),a.ctx.target=bx.$checkNaN(parseInt(e.wgtGetProperty(t,"TargetValue")))},xa.exeInputGet=function(e,t){return t.ctx.value},xa.exeInputSet=function(e,t,a){var i=t.ctx.value;return t.ctx.value=bx.$checkNaN(parseInt(a)),uxWgtCounter.check(e,t.apnOID),i!=t.ctx.value&&e.fireEvent("inputSet",void 0,t.apnOID),t.ctx.value},xa.edtOnInputGet=function(e,t,a){var i;return(i=e.pages[t].objects[a].create.data)&&i.properties&&i.properties.attrs?i.properties.attrs.InitialValue||0:0},xa.exeSetState=function(e,t,a,i,n){"increase"==a?(t.ctx.value++,uxWgtCounter.check(e,e.wgtId(t))):"decrease"==a&&(t.ctx.value--,uxWgtCounter.check(e,e.wgtId(t))),n&&uxWgtCounter.check(e,e.wgtId(t))},xa.check=function(e,t){var a=e.wgtTag(t);a.ctx.value==a.ctx.target?e.fireEvent("stateChange","$APXTrue",t):e.fireEvent("stateChange","$APXFalse",t),e.wgtSetProperty(t,"apxText",a.ctx.value+""),e.wgtSetProperty(t,"apxState","ready")},xa.edtOnSetProperty=function(e,t,a,i){"InitialValue"==a&&e.wgtSetProperty(t,"apxText",i)},xa.onEdit=void 0,xa.edtOnBuildProperty=void 0,uxWgtCounter=xa;var xa={APX_NO_POINTER_EV:!0};xa.styleMap={title:!0},xa.exeItrNoResize=!0,xa.exeItrNoZoom=!0,xa.exeItrNoMove=!0,xa.editor={},xa.editor.states={ready:"Ready",on:"Use",off:"Clear"},xa.properties={},xa.properties.state="ready",xa.properties.attrs={},xa.properties.attrs.cfg={imgPng:{mediaID:void 0},cX:0,cY:0},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n,void 0,apn.CEditorS.NO_RESIZE)},xa.exeCreateTag=function(e,t,a,i,n){var r=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;diplay:none;"});return r.apnCur={},r},xa.exeRenderTag=function(e,t,a,i,n,r){return a},xa.exeSetState=function(e,t,a){if("on"==a){var i=e.wgtGetProperty(e.wgtId(t),"cfg");i.imgPng.mediaID&&e.setCursor(e.mediaURL(i.imgPng.mediaID),i.cX,i.cY)}else"off"==a&&e.clearCursor()},xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputApplyAll(e,i),n.cX=bx.$checkNaN(parseInt(n.cX)),n.cY=bx.$checkNaN(parseInt(n.cY)),n.imgPng.mediaID&&e.wgtSetProperty(t,"apxMediaID",n.imgPng.mediaID),e.wgtSetProperty(t,"cfg",n)}var i,n=e.wgtGetProperty(t,"cfg");(i=e.dlgDoModal(600,400,a))&&(eduLib.edtInputAdd(e,i,{type:"image",title:apn.CExe.GL({ko:"커서용 이미지",en:"Image for cursor"}),value:n,key:"imgPng",join:!0}),eduLib.edtInputAdd(e,i,{type:"number",title:apn.CExe.GL({ko:"클릭점 - X",en:"Hotspot - X"})+"[px]",value:n,key:"cX",join:!0}),eduLib.edtInputAdd(e,i,{type:"number",title:apn.CExe.GL({ko:"클릭점 - Y",en:"Hotspot - Y"})+"[px]",value:n,key:"cY",join:!0}))},uxWgtCursor=xa;